(function(e){function t(e){switch(typeof e){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===e?"null":"object";}}function r(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function a(e){return"function"==typeof e}function n(e){if(null===e||e===void 0)throw TypeError();return Object(e)}function p(e){return e>>0}function l(e){return e>>>0}var u=Math.LN2,y=Math.abs,m=Math.floor,c=Math.log,g=Math.max,f=Math.min,P=Math.pow,h=Math.round;// Paranoia
//
//
(function(){var e=Object.defineProperty,t=!function(){try{return Object.defineProperty({},"x",{})}catch(e){return!1}}();(!e||t)&&(Object.defineProperty=function(t,r,a){if(e)try{return e(t,r,a)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in a&&Object.prototype.__defineGetter__.call(t,r,a.get),Object.prototype.__defineSetter__&&"set"in a&&Object.prototype.__defineSetter__.call(t,r,a.set),"value"in a&&(t[r]=a.value),t})})(),function(){function o(e){if(e=p(e),0>e)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"_bytes",{value:Array(e)});for(var t=0;t<e;t+=1)this._bytes[t]=0}function i(){if(!arguments.length||"object"!=typeof arguments[0])return function(e){if(e=p(e),0>e)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:e}),Object.defineProperty(this,"byteLength",{value:e*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new o(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(1<=arguments.length&&"object"===t(arguments[0])&&arguments[0]instanceof i)return function(e){if(this.constructor!==e.constructor)throw TypeError();var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new o(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var r=0;r<this.length;r+=1)this._setter(r,e._getter(r))}.apply(this,arguments);if(1<=arguments.length&&"object"===t(arguments[0])&&!(arguments[0]instanceof i)&&!(arguments[0]instanceof o||"ArrayBuffer"===r(arguments[0])))return function(e){var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new o(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var r,a=0;a<this.length;a+=1)r=e[a],this._setter(a,+r)}.apply(this,arguments);if(1<=arguments.length&&"object"===t(arguments[0])&&(arguments[0]instanceof o||"ArrayBuffer"===r(arguments[0])))return function(e,t,r){if(t=l(t),t>e.byteLength)throw RangeError("byteOffset out of range");if(t%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(void 0===r){var a=e.byteLength-t;if(a%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");r=a/this.BYTES_PER_ELEMENT}else r=l(r),a=r*this.BYTES_PER_ELEMENT;if(t+a>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:a}),Object.defineProperty(this,"byteOffset",{value:t}),Object.defineProperty(this,"length",{value:r})}.apply(this,arguments);throw TypeError()}e.ArrayBuffer=e.ArrayBuffer||o,Object.defineProperty(i,"from",{value:function(e){return new this(e)}}),Object.defineProperty(i,"of",{value:function()/*...items*/{return new this(arguments)}});i.prototype={},Object.defineProperty(i.prototype,"_getter",{value:function(e){if(1>arguments.length)throw SyntaxError("Not enough arguments");if(e=l(e),!(e>=this.length)){var t,r,a=[];for(t=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,r+=1)a.push(this.buffer._bytes[r]);return this._unpack(a)}}}),Object.defineProperty(i.prototype,"get",{value:i.prototype._getter}),Object.defineProperty(i.prototype,"_setter",{value:function(e,t){if(2>arguments.length)throw SyntaxError("Not enough arguments");if(e=l(e),!(e>=this.length)){var r,a,n=this._pack(t);for(r=0,a=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,a+=1)this.buffer._bytes[a]=n[r]}}}),Object.defineProperty(i.prototype,"constructor",{value:i}),Object.defineProperty(i.prototype,"filter",{value:function(e){if(this===void 0||null===this)throw TypeError();var r=Object(this),t=l(r.length);if(!a(e))throw TypeError();for(var o,n=[],p=arguments[1],d=0;d<t;d++)o=r._getter(d),e.call(p,o,d,r)&&n.push(o);return new this.constructor(n)}}),Object.defineProperty(i.prototype,"find",{value:function(e){var r=n(this),o=r.length,i=l(o);if(!a(e))throw TypeError();for(var p=1<arguments.length?arguments[1]:void 0,t=0;t<i;){var d=r._getter(t),s=e.call(p,d,t,r);if(!!s)return d;++t}return void 0}}),Object.defineProperty(i.prototype,"findIndex",{value:function(e){var r=n(this),o=r.length,i=l(o);if(!a(e))throw TypeError();for(var p=1<arguments.length?arguments[1]:void 0,t=0;t<i;){var d=r._getter(t),s=e.call(p,d,t,r);if(!!s)return t;++t}return-1}}),Object.defineProperty(i.prototype,"forEach",{value:function(e){if(this===void 0||null===this)throw TypeError();var r=Object(this),t=l(r.length);if(!a(e))throw TypeError();for(var o=arguments[1],n=0;n<t;n++)e.call(o,r._getter(n),n,r)}}),Object.defineProperty(i.prototype,"indexOf",{value:function(e){if(void 0===this||null===this)throw TypeError();var r=Object(this),t=l(r.length);if(0===t)return-1;var a=0;if(0<arguments.length&&(a=+arguments[1],a==a?0!=a&&a!=1/0&&a!=-(1/0)&&(a=(0<a||-1)*m(y(a))):a=0),a>=t)return-1;for(var o=0<=a?a:g(t-y(a),0);o<t;o++)if(r._getter(o)===e)return o;return-1}}),Object.defineProperty(i.prototype,"join",{value:function(e){if(this===void 0||null===this)throw TypeError();for(var r=Object(this),t=l(r.length),a=Array(t),o=0;o<t;++o)a[o]=r._getter(o);return a.join(e===void 0?",":e);// Hack for IE7
}}),Object.defineProperty(i.prototype,"lastIndexOf",{value:function(e){if(this===void 0||null===this)throw TypeError();var r=Object(this),t=l(r.length);if(0===t)return-1;var a=t;1<arguments.length&&(a=+arguments[1],a===a?0!==a&&a!==1/0&&a!==-(1/0)&&(a=(0<a||-1)*m(y(a))):a=0);for(var o=0<=a?f(a,t-1):t-y(a);0<=o;o--)if(r._getter(o)===e)return o;return-1}}),Object.defineProperty(i.prototype,"map",{value:function(e){if(this===void 0||null===this)throw TypeError();var r=Object(this),t=l(r.length);if(!a(e))throw TypeError();var o=[];o.length=t;for(var n=arguments[1],p=0;p<t;p++)o[p]=e.call(n,r._getter(p),p,r);return new this.constructor(o)}}),Object.defineProperty(i.prototype,"reduce",{value:function(e){if(this===void 0||null===this)throw TypeError();var r=Object(this),t=l(r.length);if(!a(e))throw TypeError();if(0===t&&1===arguments.length)throw TypeError();var o,n=0;for(o=2<=arguments.length?arguments[1]:r._getter(n++);n<t;)o=e.call(void 0,o,r._getter(n),n,r),n++;return o}}),Object.defineProperty(i.prototype,"set",{value:function(){if(1>arguments.length)throw SyntaxError("Not enough arguments");var e,t,r,a,o,n,p,u,y,m;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(e=arguments[0],r=l(arguments[1]),r+e.length>this.length)throw RangeError("Offset plus length of array is out of range");if(u=this.byteOffset+r*this.BYTES_PER_ELEMENT,y=e.length*this.BYTES_PER_ELEMENT,e.buffer===this.buffer){for(m=[],o=0,n=e.byteOffset;o<y;o+=1,n+=1)m[o]=e.buffer._bytes[n];for(o=0,p=u;o<y;o+=1,p+=1)this.buffer._bytes[p]=m[o]}else for(o=0,n=e.byteOffset,p=u;o<y;o+=1,n+=1,p+=1)this.buffer._bytes[p]=e.buffer._bytes[n]}else if("object"==typeof arguments[0]&&"undefined"!=typeof arguments[0].length){if(t=arguments[0],a=l(t.length),r=l(arguments[1]),r+a>this.length)throw RangeError("Offset plus length of array is out of range");for(o=0;o<a;o+=1)n=t[o],this._setter(r+o,+n)}else throw TypeError("Unexpected argument type(s)")}})}(),function(){function t(e,t){return a(e.get)?e.get(t):e[t]}function o(e,t,a){if(!(e instanceof ArrayBuffer||"ArrayBuffer"===r(e)))throw TypeError();if(t=l(t),t>e.byteLength)throw RangeError("byteOffset out of range");if(a=void 0===a?e.byteLength-t:l(a),t+a>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:a}),Object.defineProperty(this,"byteOffset",{value:t})}function n(e){return function(r,a){if(r=l(r),r+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");r+=this.byteOffset;for(var o=new Uint8Array(this.buffer,r,e.BYTES_PER_ELEMENT),n=[],d=0;d<e.BYTES_PER_ELEMENT;d+=1)n.push(t(o,d));return!!a===!!p&&n.reverse(),t(new e(new Uint8Array(n).buffer),0)}}var p=function(){var e=new Uint16Array([4660]),r=new Uint8Array(e.buffer);return 18===t(r,0)}();Object.defineProperty(o.prototype,"getUint8",{value:n(Uint8Array)}),Object.defineProperty(o.prototype,"getInt8",{value:n(Int8Array)}),Object.defineProperty(o.prototype,"getUint16",{value:n(Uint16Array)}),Object.defineProperty(o.prototype,"getInt16",{value:n(Int16Array)}),Object.defineProperty(o.prototype,"getUint32",{value:n(Uint32Array)}),Object.defineProperty(o.prototype,"getInt32",{value:n(Int32Array)}),Object.defineProperty(o.prototype,"getFloat32",{value:n(Float32Array)}),Object.defineProperty(o.prototype,"getFloat64",{value:n(Float64Array)}),e.DataView=e.DataView||o}()})(this),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t,r=Object(e),a=1;a<arguments.length;a++)if(t=arguments[a],null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r},writable:!0,configurable:!0});/* Code from package\dist\buffer-custom-shim.js *//**
 * Buffer override for browsers compatibility
 */function Buffer(e){return fromHexString(e)}/**
 * Buffer::from override for browsers compatibility
 */Buffer.from=function(e){return fromHexString(e)},Buffer.alloc=function(e){return new Uint8Array(e)},Uint8Array.prototype.readUInt16BE=function(e){var t=new DataView(this.buffer);return t.getUint16(e)},Uint8Array.prototype.readInt16BE=function(e){var t=new DataView(this.buffer);return t.getInt16(e)},Uint8Array.prototype.readUInt8=function(e){var t=new DataView(this.buffer);return t.getUint8(e)},Uint8Array.prototype.readUInt32BE=function(e){var t=new DataView(this.buffer);return t.getUint32(e)};/**
 * From hex string
 * @param {string} hexString
 */function fromHexString(e){var t=e.match(/.{1,2}/g);return t?new Uint8Array(t.map(e=>parseInt(e,16))):new Uint8Array}/**
 *              _                  _
 *     /\      | |                (_)
 *    /  \   __| | ___ _   _ _ __  _ ___
 *   / /\ \ / _` |/ _ \ | | | '_ \| / __|
 *  / ____ \ (_| |  __/ |_| | | | | \__ \
 * /_/    \_\__,_|\___|\__,_|_| |_|_|___/

 */var codec;(function(e){var t=/** @class */function(){/**
     * Constructor
     * @param options option object
     *   option.codecStorage: implementation of CodecStorage to use for external storage, leave blank if unknown
     */function t(t){this.parsers=[new e.GenericStatusByteExtParser,new e.Generic0x1fParser,new e.Generic0x20Parser,new e.Generic0x2fParser,new e.Generic0x30Parser,new e.Generic0x33Parser,new e.Generic0x51Parser,new e.Generic0x52Parser,new e.DcStatusByteParser,new e.Dc0x10Parser,new e.Dc0x40Parser,new e.PulseStatusByteParser,new e.Pulse0x10Parser,new e.Pulse0x11Parser,new e.Pulse0x12Parser,new e.Pulse0x30Parser,new e.Pulse0x46Parser,new e.Pulse0x47Parser,new e.Pulse0x48Parser,new e.PulseV30x10Parser,new e.PulseV30x11Parser,new e.PulseV30x12Parser,new e.PulseV30x30Parser,new e.PulseV30x46Parser,new e.PulseV30x47Parser,new e.PulseV30x5aParser,new e.PulseV30x5bParser,new e.TempStatusByteParser,new e.Temp0x10Parser,new e.Temp0x11Parser,new e.Temp0x12Parser,new e.Temp0x30Parser,new e.Temp0x43Parser,new e.TempV3StatusByteParser,new e.TempV30x10Parser,new e.TempV30x30Parser,new e.TempV30x57Parser,new e.TempV30x58Parser,new e.Comfort0x10Parser,new e.Comfort0x4cParser,new e.Comfort0x4dParser,new e.Motion0x10Parser,new e.Motion0x4eParser,new e.Motion0x4fParser,new e.Motion0x50Parser,new e.Motion0x5cParser,new e.Motion0x5dParser,new e.RepeaterStatusByteParser,new e.Repeater0x01Parser,new e.Repeater0x02Parser,new e.Repeater0x03Parser,new e.Repeater0x04Parser,new e.Deltap0x10Parser,new e.Deltap0x11Parser,new e.Deltap0x2fParser,new e.Deltap0x53Parser,new e.Deltap0x54Parser,new e.Deltap0x55Parser,new e.Deltap0x56Parser,new e.AnalogStatusByteParser,new e.Analog0x10Parser,new e.Analog0x11Parser,new e.Analog0x12Parser,new e.Analog0x13Parser,new e.Analog0x14Parser,new e.Analog0x30Parser,new e.Analog0x42Parser,new e.TicStatusByteParser,new e.Tic0x10Parser,new e.Tic0x49Parser,new e.Tic0x4aParser],this.codecStorage=t&&t.codecStorage?t.codecStorage:"undefined"==typeof localStorage?new e.InternalCodecStorage:localStorage}/**
     * Get supported device types and frame codes.
     *
     * The returned pairs are available for decoding.
     */return t.prototype.getSupported=function(){var e=[];return this.parsers.map(t=>t.deviceType.split("|").map(r=>e.push({deviceType:r,frameCode:t.frameCode}))),e},t.prototype.findDeviceTypes=function(e){if(!/^(?:[0-9a-f]{2}){2,}$/gi.test(e))return[];var t=Buffer.from(e,"hex"),r=t[0],a=this.parsers.filter(e=>e.frameCode===r).map(e=>e.deviceType);return Array.from(new Set(a))},t.prototype.decode=function(e,t,r){if(void 0===t&&(t="tmpDevId"),void 0===r&&(r="unknown"),!/^(?:[0-9a-f]{2}){2,}$/gi.test(e))return{type:"Invalid"};var a,o=Buffer.from(e,"hex"),n=o[0],i=this.fetchDeviceType(t);16===n?(a=o,this.storeConfiguration(a,t)):a=this.fetchConfiguration(t);var p=this.getActiveParsers(i,n),d=p.map(e=>{var t;try{t=e.parseFrame(o,a,r,i)}catch(e){t={error:e.toString()}}return t});p.every(e=>0>e.frameCode)&&d.push({type:"Unsupported"});var s=Object.assign(...[{}].concat(d)),l=s.type;return delete s.type,s=Object.assign({type:l},s),s},t.prototype.setDeviceType=function(e,t){void 0===t&&(t="tmpDevId"),this.codecStorage.setItem(`${t}.deviceType`,e)},t.prototype.clearStoredData=function(e){var t=this;e||(e="tmpDevId"),["deviceType","configuration"].map(t=>`${e}.${t}`).forEach(e=>t.codecStorage.removeItem(e))},t.prototype.fetchConfiguration=function(e){if(!e)return Buffer.from("");var t=this.codecStorage.getItem(`${e}.configuration`);return Buffer.from(t||"","hex")},t.prototype.storeConfiguration=function(e,t){return t?(this.codecStorage.setItem(`${t}.configuration`,e.toString("hex")),e):e},t.prototype.fetchDeviceType=function(e){return e?this.codecStorage.getItem(`${e}.deviceType`)||"":""},t.prototype.storeDeviceType=function(e,t){var r="";if(!t)return r;var a=this.parsers.filter(t=>"any"!==t.deviceType&&t.frameCode===e);return 1===a.length&&(r=a[0].deviceType,this.codecStorage.setItem(`${t}.deviceType`,r)),r},t.prototype.isCompatibleDeviceType=function(e,t){var r=e.deviceType.split("|").filter(e=>e===t);return 0<r.length},t.prototype.getActiveParsers=function(e,t){var r=this,a=[],o=this.parsers.filter(a=>r.isCompatibleDeviceType(a,e)&&(0>a.frameCode||a.frameCode===t));if(0===o.length&&"repeater"!==e){var n=this.parsers.filter(e=>"any"===e.deviceType&&(0>e.frameCode||e.frameCode===t));o=a.concat(n)}if(0<o.length){var i=this.parsers.filter(t=>r.isCompatibleDeviceType(t,e)&&0===t.frameCode);if(a=a.concat(i),0===i.length){var p=this.parsers.filter(e=>"any"===e.deviceType&&0===e.frameCode);a=a.concat(p)}}return a=a.concat(o),a},t}();e.Decoder=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.builders=[new e.Repeater0x01Builder,new e.Repeater0x02Builder,new e.Repeater0x03Builder,new e.Repeater0x04Builder,new e.Repeater0x05Builder]}/**
     * Get supported device types and frame codes.
     *
     * The returned pairs are available for encoding.
     */return t.prototype.getSupported=function(){return this.builders.map(e=>({deviceType:e.deviceType,frameCode:e.frameCode}))},t.prototype.getInputDataTypes=function(e,t){var r=this.builders.find(r=>r.deviceType===e&&r.frameCode===t);if(!r)return{};var a={},o=new r.inputDataClass;for(var n in o)o.hasOwnProperty(n)&&(a[n]=typeof o[n]);return a},t.prototype.encode=function(e,t,r,a){void 0===r&&(r="unknown");var o=this.builders.find(r=>r.deviceType===e&&r.frameCode===t);if(!o)return"";var n=o.buildFrame(a||new o.inputDataClass,r);return n.toString("hex")},t}();e.Encoder=t})(codec||(codec={})),"undefined"!=typeof module&&(module.exports=codec),"undefined"!=typeof process&&"test"===process.env.NODE_ENV&&(global.codec=codec);var codec;(function(e){var t=/** @class */function(){function e(){this.store={}}return e.prototype.getItem=function(e){return this.store[e]},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}();e.InternalCodecStorage=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="analog",this.frameCode=16}return t.prototype.parseFrame=function(t){var r={type:"0x10 Analog configuration"},a={name:"channel A"},o={name:"channel B"};2===t[8]?(r.transmissionPeriodKeepAlive={unit:"s",value:20*t[2]},r.transmissionPeriodData={unit:"s",value:20*t[3]}):(r.transmissionPeriodKeepAlive={unit:"m",value:10*t[2]},r.transmissionPeriodData={unit:"m",value:10*t[3]});var n=this.getDebounceText(t[5]>>4);return a.id=(240&t[4])>>4,a.type=this.getSensorTypeText(15&t[4]),15&t[4]&&(a.threshold=this.getThresholdTriggeringText(3&t[5]),a.externalTrigger={type:this.getThresholdTriggeringText(3&t[5]>>2),debounceDuration:{unit:n[1],value:n[0]}}),n=this.getDebounceText(t[7]>>4),o.id=(240&t[6])>>4,o.type=this.getSensorTypeText(15&t[6]),15&t[6]&&(o.threshold=this.getThresholdTriggeringText(3&t[7]),o.externalTrigger={type:this.getThresholdTriggeringText(3&t[7]>>2),debounceDuration:{unit:n[1],value:n[0]}}),r.channels=[a,o],r.productMode=e.PlateformCommonUtils.getProductModeText(t[8]),r},t.prototype.getSensorTypeText=function(e){return 0===e?"deactivated":1===e?"0-10V":2===e?"4-20mA":""},t.prototype.getThresholdTriggeringText=function(e){return 0===e?"none":1===e?"low":2===e?"high":3===e?"both":""},t.prototype.getDebounceText=function(e){return 0===e?[0,"s"]:1===e?[10,"ms"]:2===e?[20,"ms"]:3===e?[50,"ms"]:4===e?[100,"ms"]:5===e?[200,"ms"]:6===e?[500,"ms"]:7===e?[1,"s"]:8===e?[2,"s"]:9===e?[5,"s"]:10===e?[10,"s"]:11===e?[20,"s"]:12===e?[40,"s"]:13===e?[60,"s"]:14===e?[5,"m"]:[0,"s"]},t}();e.Analog0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="analog",this.frameCode=17}return e.prototype.parseFrame=function(e){var t={type:"0x11 Analog configuration",threshold:{name:"channel A",unit:"\xB5V or 10 nA",high:{value:16777215&e.readUInt32BE(1),hysteresis:16777215&e.readUInt32BE(4)}}};return t},e}();e.Analog0x11Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="analog",this.frameCode=18}return e.prototype.parseFrame=function(e){var t={type:"0x12 Analog configuration",threshold:{name:"channel A",unit:"\xB5V or 10 nA",low:{value:16777215&e.readUInt32BE(1),hysteresis:16777215&e.readUInt32BE(4)}}};return t},e}();e.Analog0x12Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="analog",this.frameCode=19}return e.prototype.parseFrame=function(e){var t={type:"0x13 Analog configuration",threshold:{name:"channel B",unit:"\xB5V or 10 nA",high:{value:16777215&e.readUInt32BE(1),hysteresis:16777215&e.readUInt32BE(4)}}};return t},e}();e.Analog0x13Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="analog",this.frameCode=20}return e.prototype.parseFrame=function(e){var t={type:"0x14 Analog configuration",threshold:{name:"channel B",unit:"\xB5V or 10 nA",low:{value:16777215&e.readUInt32BE(1),hysteresis:16777215&e.readUInt32BE(4)}}};return t},e}();e.Analog0x14Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="analog",this.frameCode=48,this.parser=new e.Analog0x42Parser}return t.prototype.parseFrame=function(e,t,r){var a=this.parser.parseFrame(e,t,r);return a.type="0x30 Analog keep alive",a},t}();e.Analog0x30Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="analog",this.frameCode=66}return e.prototype.parseFrame=function(e){var t={type:"0x42 Analog data"},r={name:"channel A"},a={name:"channel B"},o=15&e[2],n=16777215&e.readUInt32BE(2);return 1==o?(r.unit="V",r.value=parseFloat((n/1000000).toFixed(3))):2==o?(r.unit="mA",r.value=parseFloat((n/100000).toFixed(3))):r.state="deactivated",o=15&e[6],n=16777215&e.readUInt32BE(6),1==o?(a.unit="V",a.value=parseFloat((n/1000000).toFixed(3))):2==o?(a.unit="mA",a.value=parseFloat((n/100000).toFixed(3))):a.state="deactivated",t.channels=[r,a],t},e}();e.Analog0x42Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="analog",this.frameCode=0}return t.prototype.parseFrame=function(t,r){var a={},o=new e.GenericStatusByteParser;return a=o.parseFrame(t,r),a.alarmChannelA=!!(8&t[1]),a.alarmChannelB=!!(16&t[1]),{status:a}},t}();e.AnalogStatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="comfort",this.frameCode=16}return e.prototype.parseFrame=function(e){var t={type:"0x10 Comfort configuration",transmissionPeriodKeepAlive:{unit:"s",value:10*e.readUInt16BE(2)},numberOfHistorizationBeforeSending:e.readUInt16BE(4),numberOfSamplingBeforeHistorization:e.readUInt16BE(6),samplingPeriod:{unit:"s",value:2*e.readUInt16BE(8)},calculatedPeriodRecording:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6))},calculatedSendingPeriod:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6)*e.readUInt16BE(4))}};return t},e}();e.Comfort0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="comfort",this.frameCode=76}return e.prototype.parseFrame=function(e){for(var t,r={type:"0x4c Comfort data"},a=[],o=[],n=2;n<e.byteLength;n+=3)t=e.readInt16BE(n),a.push(t/10),t=e.readUInt8(n+2),o.push(t);return r.decodingInfo="values: [t=0, t-1, t-2, ...]",r.temperature={unit:"\xB0C",values:a},r.humidity={unit:"%",values:o},r},e}();e.Comfort0x4cParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="comfort",this.frameCode=77}return e.prototype.parseFrame=function(e){var t={type:"0x4d Comfort alarm",alarmTemperature:{alarmStatus:e.readUInt8(2)>>4?"active":"inactive",temperature:{unit:"\xB0C",value:e.readInt16BE(3)/10}},alarmHumidity:{alarmStatus:1&e.readUInt8(2)?"active":"inactive",humidity:{unit:"%",value:e.readUInt8(5)}}};return t},e}();e.Comfort0x4dParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="dc",this.frameCode=16}return t.prototype.parseFrame=function(t){var r={type:"0x10 Dry Contacts configuration"};r.productMode=e.PlateformCommonUtils.getProductModeText(t[8]),1===t[8]?(r.keepAlivePeriod={unit:"m",value:10*t.readUInt8(2)},r.transmitPeriod={unit:"m",value:10*t.readUInt8(3)}):(r.keepAlivePeriod={unit:"s",value:20*t.readUInt8(2)},r.transmitPeriod={unit:"s",value:20*t.readUInt8(3)});var a=this.getDebounceText(t[4]>>4),o=this.getTypeText(15&t[4]);return r.channelA="disabled"===o[0]?{type:o[0]}:{type:o[0],edge:o[1],debounceDuration:{unit:a[1],value:a[0]}},a=this.getDebounceText(t[5]>>4),o=this.getTypeText(15&t[5]),r.channelB="disabled"===o[0]?{type:o[0]}:{type:o[0],edge:o[1],debounceDuration:{unit:a[1],value:a[0]}},a=this.getDebounceText(t[6]>>4),o=this.getTypeText(15&t[6]),r.channelC="disabled"===o[0]?{type:o[0]}:{type:o[0],edge:o[1],debounceDuration:{unit:a[1],value:a[0]}},a=this.getDebounceText(t[7]>>4),o=this.getTypeText(15&t[7]),r.channelD="disabled"===o[0]?{type:o[0]}:{type:o[0],edge:o[1],debounceDuration:{unit:a[1],value:a[0]}},r},t.prototype.getTypeText=function(e){return 0===e?["disabled",""]:1===e?["inputPeriodic","high"]:2===e?["inputPeriodic","low"]:3===e?["inputPeriodic","both"]:4===e?["inputEvent","high"]:5===e?["inputEvent","low"]:6===e?["inputEvent","both"]:7===e?["output","high"]:8===e?["output","low"]:["disabled",""]},t.prototype.getDebounceText=function(e){return 0===e?[0,"s"]:1===e?[10,"ms"]:2===e?[20,"ms"]:3===e?[50,"ms"]:4===e?[100,"ms"]:5===e?[200,"ms"]:6===e?[500,"ms"]:7===e?[1,"s"]:8===e?[2,"s"]:9===e?[5,"s"]:10===e?[10,"s"]:11===e?[20,"s"]:12===e?[40,"s"]:13===e?[60,"s"]:14===e?[5,"m"]:15===e?[10,"m"]:[0,"s"]},t}();e.Dc0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="dc",this.frameCode=64}return e.prototype.parseFrame=function(e){var t={type:"0x40 Dry Contacts data",decodingInfo:"true: ON/CLOSED, false: OFF/OPEN",channelA:{value:e.readUInt16BE(2),currentState:!!(1&e[10]),previousFrameState:!!(2&e[10])},channelB:{value:e.readUInt16BE(4),currentState:!!(4&e[10]),previousFrameState:!!(8&e[10])},channelC:{value:e.readUInt16BE(6),currentState:!!(16&e[10]),previousFrameState:!!(32&e[10])},channelD:{value:e.readUInt16BE(8),currentState:!!(64&e[10]),previousFrameState:!!(128&e[10])}};return t},e}();e.Dc0x40Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="dc",this.frameCode=0}return t.prototype.parseFrame=function(t,r){var a={},o=new e.GenericStatusByteParser;return a=o.parseFrame(t,r),{status:a}},t}();e.DcStatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="deltap",this.frameCode=16}return e.prototype.parseFrame=function(e){var t={type:"0x10 Delta P configuration",transmissionPeriodKeepAlive:{unit:"s",value:10*e.readUInt16BE(2)},numberOfHistorizationBeforeSending:e.readUInt16BE(4),numberOfSamplingBeforeHistorization:e.readUInt16BE(6),samplingPeriod:{unit:"s",value:2*e.readUInt16BE(8)},calculatedPeriodRecording:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6))},calculatedSendingPeriod:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6)*e.readUInt16BE(4))}};return t},e}();e.Deltap0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="deltap",this.frameCode=17}return e.prototype.parseFrame=function(e){var t={type:"0x11 Delta P 0-10V configuration",numberOfHistorizationBeforeSending:e.readUInt16BE(6),numberOfSamplingBeforeHistorization:e.readUInt16BE(2),samplingPeriod:{unit:"s",value:2*e.readUInt16BE(4)},calculatedPeriodRecording:{unit:"s",value:2*(e.readUInt16BE(2)*e.readUInt16BE(4))},calculatedSendingPeriod:{unit:"s",value:2*(e.readUInt16BE(2)*e.readUInt16BE(4)*e.readUInt16BE(6))}};return t},e}();e.Deltap0x11Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="deltap",this.frameCode=47}return e.prototype.parseFrame=function(e){var t={type:"0x2f Delta P Downlink ack",requestStatus:this.getRequestStatusText(e[2])};return t},e.prototype.getRequestStatusText=function(e){return 1===e?"success":2===e?"errorGeneric":3===e?"errorWrongState":4===e?"errorInvalidRequest":"errorOtherReason"},e}();e.Deltap0x2fParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="deltap",this.frameCode=83}return e.prototype.parseFrame=function(e){for(var t={type:"0x53 Delta P periodic data"},r=[],a=2;a<e.byteLength;a+=2)r.push(e.readInt16BE(a));return t.decodingInfo="values: [t=0, t-1, t-2, ...]",t.deltaPressure={unit:"pa",values:r},t},e}();e.Deltap0x53Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="deltap",this.frameCode=84}return e.prototype.parseFrame=function(e){var t={type:"0x54 Delta P alarm",alarmStatus:e.readUInt8(2)?"active":"inactive",deltaPressure:{unit:"pa",value:e.readInt16BE(3)}};return t},e}();e.Deltap0x54Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="deltap",this.frameCode=85}return e.prototype.parseFrame=function(e){for(var t={type:"0x55 Delta P - periodic 0-10 V"},r=[],a=2;a<e.byteLength;a+=2)r.push(e.readInt16BE(a));return t.decodingInfo="values: [t=0, t-1, t-2, ...]",t.voltage={unit:"mV",values:r},t},e}();e.Deltap0x55Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="deltap",this.frameCode=86}return e.prototype.parseFrame=function(e){var t={type:"0x56 Delta P - alarm 0-10 V",alarmStatus:e.readUInt8(2)?"active":"inactive",voltage:{unit:"mV",value:e.readInt16BE(3)}};return t},e}();e.Deltap0x56Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion|comfort|deltap",this.frameCode=31}return e.prototype.parseFrame=function(e){var t={type:"0x1f digital input configuration"},r={},a={};return r.type=this.getTypeText(15&e[2]),r.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&e[2])>>4)},r.threshold=e.readUInt16BE(3),a.type=this.getTypeText(15&e[5]),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&e[5])>>4)},a.threshold=e.readUInt16BE(6),t.digitalInput1=r,t.digitalInput2=a,t},e.prototype.getDebouncingPeriodText=function(e){return 0===e?0:1===e?10:2===e?20:3===e?500:4===e?100:5===e?200:6===e?500:7===e?1e3:8===e?2e3:9===e?5e3:10===e?1e4:11===e?2e4:12===e?4e4:13===e?6e4:14===e?3e5:15===e?6e5:0},e.prototype.getTypeText=function(e){return 0===e?"deactivated":1===e?"highEdge":2===e?"lowEdge":3===e?"bothEdges":""},e}();e.Generic0x1fParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="any",this.frameCode=32}return t.prototype.parseFrame=function(t,r,a,o){var n={type:"0x20 Configuration"};switch(t.byteLength){case 4:n.loraAdr=!!(1&t[2]),n.loraProvisioningMode=0===t[3]?"ABP":"OTAA",4&t[2]?n.loraDutycyle="activated":("temp3"===o||"pulse3"===o)&&(n.loraDutycyle="deactivated"),n.loraClassMode=32&t[2]?"CLASS C":"CLASS A";break;case 3:n.sigfoxRetry=3&t[2];break;default:n.partialDecoding=e.PartialDecodingReason.MISSING_NETWORK;}return n},t}();e.Generic0x20Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="dc",this.frameCode=47}return e.prototype.parseFrame=function(e){var t={type:"0x2f Downlink ack",downlinkFramecode:`0x${e[2].toString(16)}`,requestStatus:this.getRequestStatusText(e[3])};return t},e.prototype.getRequestStatusText=function(e){return 1===e?"success":2===e?"errorGeneric":3===e?"errorWrongState":4===e?"errorInvalidRequest":"errorOtherReason"},e}();e.Generic0x2fParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="any",this.frameCode=48}return e.prototype.parseFrame=function(){return{type:"0x30 Keep alive"}},e}();e.Generic0x30Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="dc|pulse3|temp3|comfort|motion||deltap",this.frameCode=51}return e.prototype.parseFrame=function(e){var t={type:"0x33 Set register status",requestStatus:this.getRequestStatusText(e[2]),registerId:e.readUInt16BE(3)};return t},e.prototype.getRequestStatusText=function(e){return 1===e?"success":2===e?"successNoUpdate":3===e?"errorCoherency":4===e?"errorInvalidRegister":5===e?"errorInvalidValue":6===e?"errorTruncatedValue":7===e?"errorAccesNotAllowed":"errorOtherReason"},e}();e.Generic0x33Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion|comfort|deltap",this.frameCode=81}return e.prototype.parseFrame=function(e){var t={type:"0x51 digital input 1 alarm",state:{previousFrame:!!(1&e.readUInt8(2)>>1),current:!!(1&e.readUInt8(2)>>0)},counter:{global:e.readUInt32BE(3),instantaneous:e.readUInt16BE(7)}};return t},e}();e.Generic0x51Parser=t})(codec||(codec={}));var codec,__assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)};(function(e){var t=/** @class */function(){function t(){this.deviceType="motion|comfort|deltap",this.frameCode=82,this.parser=new e.Generic0x51Parser}return t.prototype.parseFrame=function(e,t,r){var a=__assign({},this.parser.parseFrame(e,t,r),{type:"0x52 digital input 2 alarm"});return a},t}();e.Generic0x52Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="any",this.frameCode=0}return t.prototype.parseFrame=function(t,r){var a={},o=new e.GenericStatusByteParser;return a=o.parseFrame(t,r),a.configurationInconsistency=!!(8&t[1]),{status:a}},t}();e.GenericStatusByteExtParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="any",this.frameCode=0}return e.prototype.parseFrame=function(e){var t={frameCounter:(224&e[1])>>5,hardwareError:!!(4&e[1]),lowBattery:!!(2&e[1]),configurationDone:!!(1&e[1])};return t},e}();e.GenericStatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion",this.frameCode=16}return e.prototype.parseFrame=function(e){var t={type:"0x10 Motion configuration",transmissionPeriodKeepAlive:{unit:"s",value:10*e.readUInt16BE(2)},numberOfHistorizationBeforeSending:e.readUInt16BE(4),numberOfSamplingBeforeHistorization:e.readUInt16BE(6),samplingPeriod:{unit:"s",value:2*e.readUInt16BE(8)},presenceDetectorInhibition:{unit:"s",value:10*e.readUInt16BE(10)},calculatedPeriodRecording:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6))},calculatedSendingPeriod:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6)*e.readUInt16BE(4))}};return t},e}();e.Motion0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion",this.frameCode=78}return e.prototype.parseFrame=function(e){var t={type:"0x4e Motion data"},r=[],a=[];t.globalCounterValue=e.readUInt16BE(2);for(var o=4;o<e.byteLength;o+=3)r.push(e.readInt16BE(o)),a.push(e.readUInt8(o+2));return t.decodingInfo="counterValues/values: [t=0, t-1, t-2, ...]",t.counterValues=r,t.luminosity={unit:"%",values:a},t},e}();e.Motion0x4eParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion",this.frameCode=79}return e.prototype.parseFrame=function(e){var t={type:"0x4f Motion presence alarm",alarmPresence:{globalCounterValue:e.readUInt16BE(2),counterValue:e.readUInt16BE(4)}};return t},e}();e.Motion0x4fParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion",this.frameCode=80}return e.prototype.parseFrame=function(e){var t={type:"0x50 Motion luminosity alarm",alarmLuminosity:{alarmStatus:e[2]?"active":"inactive",luminosity:{unit:"%",value:e[3]}}};return t},e}();e.Motion0x50Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion",this.frameCode=92}return e.prototype.parseFrame=function(e){var t={type:"0x5c Motion data"},r=[],a=[];t.presenceDetectedWhenSending=!!e.readUInt16BE(2);for(var o=3;o<e.byteLength;o+=2)r.push(e[o]),a.push(e[o+1]);return t.decodingInfo="values: [t=0, t-1, t-2, ...]",t.presence={unit:"%",values:r},t.luminosity={unit:"%",values:a},t},e}();e.Motion0x5cParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="motion",this.frameCode=93}return e.prototype.parseFrame=function(e){var t={type:"0x5d Motion presence alarm",alarmPresence:{alarmStatus:e.readUInt16BE(2)?"active":"inactive",luminosity:{unit:"%",value:e[3]}}};return t},e}();e.Motion0x5dParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="pulse",this.frameCode=16,this.pulse0x11Parser=new e.Pulse0x11Parser,this.pulse0x12Parser=new e.Pulse0x12Parser}return t.prototype.parseFrame=function(t){var r={type:"0x10 Pulse configuration"},a={name:"channel A"},o={name:"channel B"};r.productMode=e.PlateformCommonUtils.getProductModeText(t[2]);var n=this.inferNetwork(t.byteLength),i=0;return 2===t[8]?"sigfox"===n?(r.transmissionPeriod={unit:"s",value:20*t[3]},i=-1):r.transmissionPeriod={unit:"s",value:20*t.readUInt16BE(3)}:"sigfox"===n?(r.transmissionPeriod={unit:"m",value:10*t[3]},i=-1):r.transmissionPeriod={unit:"m",value:t.readUInt16BE(3)},r.flowCalculationPeriod=2===t[2]?{unit:"s",value:20*t.readUInt16BE(i+8)}:{unit:"m",value:t.readUInt16BE(i+8)},r.historicMode=this.getHistoricModeText(t[i+6]),a.state=this.getStateText(!!(1&t[i+5])),a.type=this.getTypeText(!!(2&t[i+5])),a.tamperActivated=!!(8&t[i+5]),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriod(15&t[i+7])},"lora868"===n&&(a.leakageDetection={overflowAlarmTriggerThreshold:t.readUInt16BE(10),threshold:t.readUInt16BE(14),dailyPeriodsBelowWhichLeakageAlarmTriggered:t.readUInt16BE(18)}),o.state=this.getStateText(!!(16&t[i+5])),o.type=this.getTypeText(!!(32&t[i+5])),o.tamperActivated=!!(128&t[i+5]),o.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriod((240&t[i+7])>>4)},"lora868"===n&&(o.leakageDetection={overflowAlarmTriggerThreshold:t.readUInt16BE(12),threshold:t.readUInt16BE(16),dailyPeriodsBelowWhichLeakageAlarmTriggered:t.readUInt16BE(20)}),r.channels=[a,o],r},t.prototype.inferNetwork=function(e){return 22===e?"lora868":9===e?"sigfox":"unknown"},t.prototype.getStateText=function(e){return e?"enabled":"disabled"},t.prototype.getTypeText=function(e){return e?"gasPullUpOn":"otherPullUpOff"},t.prototype.getHistoricModeText=function(e){return 0===e?"noHistoric":1===e?"historicLogEvery10min":2===e?"historicLogEvery1h":""},t.prototype.getDebouncingPeriod=function(e){return 0===e?0:1===e?1:2===e?10:3===e?20:4===e?50:5===e?100:6===e?200:7===e?500:8===e?1e3:9===e?2e3:10===e?5e3:11===e?1e4:0},t}();e.Pulse0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse",this.frameCode=17}return e.prototype.parseFrame=function(e){var t={type:"0x11 Pulse configuration"},r={name:"channel A"},a={name:"channel B"};return r.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(2),threshold:e.readUInt16BE(6)},a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(4),threshold:e.readUInt16BE(8)},t.channels=[r,a],t},e}();e.Pulse0x11Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse",this.frameCode=18}return e.prototype.parseFrame=function(e){var t={type:"0x12 Pulse configuration"},r={name:"channel A"},a={name:"channel B"};return r.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(2)},a.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(4)},t.channels=[r,a],t},e}();e.Pulse0x12Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse",this.frameCode=48}return e.prototype.parseFrame=function(e){var t={type:"0x30 Pulse keep alive"},r={name:"channel A"},a={name:"channel B"};return r.flow={alarm:!!(1&e[2]),last24hMin:e.readUInt16BE(7),last24hMax:e.readUInt16BE(3)},r.tamperAlarm=!!(4&e[2]),r.leakageAlarm=!!(16&e[2]),a.flow={alarm:!!(2&e[2]),last24hMin:e.readUInt16BE(9),last24hMax:e.readUInt16BE(5)},a.tamperAlarm=!!(8&e[2]),a.leakageAlarm=!!(32&e[2]),t.channels=[r,a],t},e}();e.Pulse0x30Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse",this.frameCode=70}return e.prototype.parseFrame=function(e){var t={type:"0x46 Pulse data",decodingInfo:"counterValues: [Channel A, Channel B]",counterValues:[e.readUInt32BE(2),e.readUInt32BE(6)]};return t},e}();e.Pulse0x46Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse",this.frameCode=71}return e.prototype.parseFrame=function(e){var t={type:"0x47 Pulse alarm",decodingInfo:"flowValues: [Channel A, Channel B]",flowValues:[e.readUInt16BE(2),e.readUInt16BE(4)]};return t},e}();e.Pulse0x47Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse",this.frameCode=72}return e.prototype.parseFrame=function(e){var t={type:"0x48 Pulse historic data"},r=[],a=[],o={name:"channel A"},n={name:"channel B"},i=e[2];t.frameIndex=i,0===i&&(o.index=e.readUInt32BE(3),n.index=e.readUInt32BE(7));for(var p=0===i?11:3,d=this.getBase(i,e.byteLength),s=p;s<e.byteLength;s+=4)r.push(e.readUInt16BE(s)),a.push(e.readUInt16BE(s+2));return 0<r.length&&(t.baseTime=d,t.decodingInfo=`deltaValues: [t=${d} to t=${d+1}, t=${d+1} to t=${d+2}, ...]`,o.deltaValues=r,n.deltaValues=a),t.channels=[o,n],t},e.prototype.getBase=function(e,t){return 31===t||51===t?[1,11][e]:2===e&&7===t||12===e&&7===t?23:3===e&&7===t?5:11===t?[1,1,3,5,7,9,11,13,15,17,19,21,23][e]:0},e}();e.Pulse0x48Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="pulse",this.frameCode=0}return t.prototype.parseFrame=function(t,r){var a={},o=new e.GenericStatusByteParser;return a=o.parseFrame(t,r),{status:a}},t}();e.PulseStatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="pulse3",this.frameCode=16}return t.prototype.parseFrame=function(t){var r={type:"0x10 Pulse 3 configuration"},a={name:"channel A"},o={name:"channel B"};r.productMode=e.PlateformCommonUtils.getProductModeText(t[2]);var n=this.inferNetwork(t.byteLength);return r.numberOfHistorizationBeforeSending=t.readUInt16BE(3),r.samplingPeriod={unit:"s",value:2*t.readUInt16BE(6)},r.calculatedSendingPeriod={unit:"s",value:2*(t.readUInt16BE(3)*t.readUInt16BE(6))},r.flowCalculationPeriod=2===t[2]?{unit:"s",value:20*t.readUInt16BE(9)}:{unit:"m",value:t.readUInt16BE(9)},"lora868"===n&&(r.redundantSamples=t.readUInt8(27)),a.state=this.getStateText(!!(1&t[5])),a.type=this.getTypeText(!!(2&t[5])),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText(15&t[8])},"lora868"===n?(a.leakageDetection={overflowAlarmTriggerThreshold:t.readUInt16BE(11),threshold:t.readUInt16BE(15),dailyPeriodsBelowWhichLeakageAlarmTriggered:t.readUInt16BE(19)},a.tamper={activated:!!(8&t[5]),samplePeriodForDetection:{unit:"s",value:10*t.readUInt8(23)},threshold:t.readUInt8(24)}):"sigfox"===n&&(a.tamper={activated:!!(8&t[5])}),o.state=this.getStateText(!!(16&t[5])),o.type=this.getTypeText(!!(32&t[5])),o.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&t[8])>>4)},"lora868"===n?(o.leakageDetection={overflowAlarmTriggerThreshold:t.readUInt16BE(13),threshold:t.readUInt16BE(17),dailyPeriodsBelowWhichLeakageAlarmTriggered:t.readUInt16BE(21)},o.tamper={activated:!!(128&t[5]),samplePeriodForDetection:{unit:"s",value:10*t.readUInt8(25)},threshold:t.readUInt8(26)}):"sigfox"===n&&(o.tamper={activated:!!(128&t[5])}),r.channels=[a,o],r},t.prototype.inferNetwork=function(e){return 28===e?"lora868":11===e?"sigfox":"unknown"},t.prototype.getStateText=function(e){return e?"enabled":"disabled"},t.prototype.getTypeText=function(e){return e?"gasPullUpOn":"otherPullUpOff"},t.prototype.getDebouncingPeriodText=function(e){return 0===e?0:1===e?1:2===e?10:3===e?20:4===e?50:5===e?100:6===e?200:7===e?500:8===e?1e3:9===e?2e3:10===e?5e3:11===e?1e4:0},t}();e.PulseV30x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse3",this.frameCode=17}return e.prototype.parseFrame=function(e){var t={type:"0x11 Pulse 3 configuration"},r={name:"channel A"},a={name:"channel B"};return r.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(2),threshold:e.readUInt16BE(6)},a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(4),threshold:e.readUInt16BE(8)},t.channels=[r,a],t},e}();e.PulseV30x11Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse3",this.frameCode=18}return e.prototype.parseFrame=function(e){var t={type:"0x12 Pulse 3 configuration"},r={name:"channel A"},a={name:"channel B"};return r.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(2)},r.tamper={samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(6)},threshold:e.readUInt8(7)},a.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(4)},a.tamper={samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(8)},threshold:e.readUInt8(9)},t.channels=[r,a],t},e}();e.PulseV30x12Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse3",this.frameCode=48}return e.prototype.parseFrame=function(e){var t={type:"0x30 Pulse 3 keep alive"},r={name:"channel A"},a={name:"channel B"};return r.flow={alarm:!!(1&e[2]),last24hMin:e.readUInt16BE(7),last24hMax:e.readUInt16BE(3)},r.tamperAlarm=!!(4&e[2]),r.leakageAlarm=!!(16&e[2]),a.flow={alarm:!!(2&e[2]),last24hMin:e.readUInt16BE(9),last24hMax:e.readUInt16BE(5)},a.tamperAlarm=!!(8&e[2]),a.leakageAlarm=!!(32&e[2]),t.channels=[r,a],t},e}();e.PulseV30x30Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse3",this.frameCode=70}return e.prototype.parseFrame=function(e){var t={type:"0x46 Pulse 3 data",decodingInfo:"counterValues: [Channel A, Channel B]",counterValues:[e.readUInt32BE(2),e.readUInt32BE(6)]};return t},e}();e.PulseV30x46Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse3",this.frameCode=71}return e.prototype.parseFrame=function(e){var t={type:"0x47 Pulse 3 alarm",decodingInfo:"flowValues: [Channel A, Channel B]",flowValues:[e.readUInt16BE(2),e.readUInt16BE(4)]};return t},e}();e.PulseV30x47Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse3",this.frameCode=90}return e.prototype.parseFrame=function(e){for(var t=e.readUInt32BE(2),r={type:"0x5a Pulse 3 data - channel A"},a=[t],o=6;o<e.byteLength;o+=2)t-=e.readInt16BE(o),a.push(t);return r.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",r.counterValues=a,r},e.prototype.getReadingFrequency=function(e){return 0<e.byteLength?2*(e.readUInt16BE(8)*e.readUInt16BE(6)):null},e}();e.PulseV30x5aParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="pulse3",this.frameCode=91}return e.prototype.parseFrame=function(e){for(var t=e.readUInt32BE(2),r={type:"0x5b Pulse 3 data - channel B"},a=[t],o=6;o<e.byteLength;o+=2)t-=e.readInt16BE(o),a.push(t);return r.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",r.counterValues=a,r},e.prototype.getReadingFrequency=function(e){return 0<e.byteLength?2*(e.readUInt16BE(8)*e.readUInt16BE(6)):null},e}();e.PulseV30x5bParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){return function(){this.return_mode=0}}();e.Repeater0x01InputData=t;var r=/** @class */function(){function e(){this.deviceType="repeater",this.frameCode=1,this.inputDataClass=t}return e.prototype.buildFrame=function(e){var t=Buffer.alloc(8);return t[0]=this.frameCode,t.writeUInt8(e.return_mode,1),t},e}();e.Repeater0x01Builder=r})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="repeater",this.frameCode=1}return t.prototype.parseFrame=function(e){var t=__assign({type:"0x01 Repeater WL add"},this.getDataFromPayload(e));return t},t.prototype.getDataFromPayload=function(t){var r={};return e.RepeaterHelper.getUPStatusFromPayload(t,r),r},t}();e.Repeater0x01Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){return function(){this.wl_activation=0,this.id=0}}();e.Repeater0x02InputData=t;var r=/** @class */function(){function e(){this.deviceType="repeater",this.frameCode=2,this.inputDataClass=t}return e.prototype.buildFrame=function(e){var t=Buffer.alloc(8);return t[0]=this.frameCode,t.writeUInt8(e.wl_activation,1),t.writeUInt32BE(e.id,1),t},e}();e.Repeater0x02Builder=r})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="repeater",this.frameCode=2}return t.prototype.parseFrame=function(e){var t=__assign({type:"0x02 Repeater WL modification"},this.getDataFromPayload(e));return t},t.prototype.getDataFromPayload=function(t){var r={};return e.RepeaterHelper.getUPStatusFromPayload(t,r),r.numberOfIdInWl=t.readUInt8(2),r},t}();e.Repeater0x02Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){return function(){this.wl_validation=0,this.id=0}}();e.Repeater0x03InputData=t;var r=/** @class */function(){function e(){this.deviceType="repeater",this.frameCode=3,this.inputDataClass=t}return e.prototype.buildFrame=function(e){var t=Buffer.alloc(8);return t[0]=this.frameCode,t.writeUInt8(e.wl_validation,1),t.writeUInt32BE(e.id,2),t},e}();e.Repeater0x03Builder=r})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="repeater",this.frameCode=3}return t.prototype.parseFrame=function(e){var t=__assign({type:"0x03 Repeater DL confirmation"},this.getDataFromPayload(e));return t},t.prototype.getDataFromPayload=function(t){var r={};return e.RepeaterHelper.getUPStatusFromPayload(t,r),r.downlinkCode=e.RepeaterHelper.getDownlinkDescriptionForCode(t.readUInt8(2)),r.downlinkErrorCode=e.RepeaterHelper.getErrorDescriptionForCode(t.readUInt8(3)),r},t}();e.Repeater0x03Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){return function(){// 01- 31
// 00 ou 02
// 00/01/02
this.S300=1,this.S303=0,this.S304=0,this.S306=0}}();e.Repeater0x04InputData=t;var r=/** @class */function(){function e(){this.deviceType="repeater",this.frameCode=4,this.inputDataClass=t}return e.prototype.buildFrame=function(e){var t=Buffer.alloc(8);return t[0]=this.frameCode,t.writeUInt8(e.S300,1),t.writeUInt8(e.S303,2),t.writeUInt8(e.S304,3),t.writeUInt8(e.S306,4),t},e.prototype.getFirstIds=function(e){return e.filter(e=>8<=e)},e.prototype.getLastIds=function(e){return e.filter(e=>8>e)},e.prototype.getByteFromIdsList=function(e){var t=Buffer.alloc(8);return e.forEach((e,r)=>t[r]=e),t.readUInt8(0)},e}();e.Repeater0x04Builder=r})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="repeater",this.frameCode=4}return t.prototype.parseFrame=function(e){var t=__assign({type:"0x04 White List confirmation"},this.getDataFromPayload(e));return t},t.prototype.getDataFromPayload=function(t){var r={};return e.RepeaterHelper.getUPStatusFromPayload(t,r),r.numberOfIdInWl=t.readUInt8(2),r},t}();e.Repeater0x04Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){return function(){}}();e.Repeater0x05InputData=t;var r=/** @class */function(){function e(){this.deviceType="repeater",this.frameCode=5,this.inputDataClass=t}return e.prototype.buildFrame=function(){var e=Buffer.alloc(8);return e[0]=this.frameCode,e},e}();e.Repeater0x05Builder=r})(codec||(codec={}));var codec;(function(e){var t={0:"0x00 The action has been correctly realized"},r={},a=/** @class */function(){function e(){}return e.hex2bin=function(e){return parseInt(e,16).toString(2).padStart(8,"0")},e.getUPStatusFromPayload=function(t,r){var a=t[1],o=1;/^\d$/.test(`${a}`)?(r.frameCounter=0,o=0):r.frameCounter=parseInt(t.readUInt8(1).toString(16).charAt(0),16);var n=t.readUInt8(1).toString(16),i=e.hex2bin(n),p=i[i.length-1];return r.lowBattery="1"===p,r},e.getDownlinkDescriptionForCode=function(e){return r[e]||e},e.getErrorDescriptionForCode=function(e){return t[e]||e},e}();e.RepeaterHelper=a})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="repeater",this.frameCode=0}return e.prototype.parseFrame=function(){return{}},e}();e.RepeaterStatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="temp",this.frameCode=16}return t.prototype.parseFrame=function(t){var r={type:"0x10 Temperature configuration"},a={name:"probe 1"},o={name:"probe 2"};return 2===t[8]?(r.transmissionPeriodKeepAlive={unit:"s",value:20*t[2]},r.transmissionPeriodData={unit:"s",value:20*t[3]},r.samplingPeriod={unit:"s",value:10*t[10]}):(r.transmissionPeriodKeepAlive={unit:"m",value:10*t[2]},r.transmissionPeriodData={unit:"m",value:10*t[3]},r.samplingPeriod={unit:"m",value:t[10]}),a.id=(240&t[4])>>4,a.threshold=this.getThresholdTriggeringText(3&t[5]),a.state=1&t[9]?"activated":"deactivated",o.id=(240&t[6])>>4,o.threshold=this.getThresholdTriggeringText(3&t[7]),o.state=2&t[9]?"activated":"deactivated",r.probes=[a,o],r.productMode=e.PlateformCommonUtils.getProductModeText(t[8]),r},t.prototype.getThresholdTriggeringText=function(e){return 0===e?"none":1===e?"low":2===e?"high":3===e?"both":""},t}();e.Temp0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="temp",this.frameCode=17}return e.prototype.parseFrame=function(e){var t={type:"0x11 Temperature configuration",threshold:{name:"probe 1",unit:"\xB0C",high:{value:e.readInt16BE(2)/10,hysteresis:e[4]/10},low:{value:e.readInt16BE(5)/10,hysteresis:e[7]/10}},superSamplingFactor:e[8]};return t},e}();e.Temp0x11Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="temp",this.frameCode=18}return e.prototype.parseFrame=function(e){var t={type:"0x12 Temperature configuration",threshold:{name:"probe 2",unit:"\xB0C",high:{value:e.readInt16BE(2)/10,hysteresis:e[4]/10},low:{value:e.readInt16BE(5)/10,hysteresis:e[7]/10}}};return t},e}();e.Temp0x12Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="temp",this.frameCode=48,this.temp0x43Parser=new e.Temp0x43Parser}return t.prototype.parseFrame=function(e,t,r){var a=this.temp0x43Parser.parseFrame(e,t,r);return a.type="0x30 Temperature keep alive",a},t}();e.Temp0x30Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="temp",this.frameCode=67}return e.prototype.parseFrame=function(e){var t={type:"0x43 Temperature data"},r={name:"probe 1"},a={name:"probe 2"};return r.id=(240&e[2])>>4,r.unit="\xB0C",r.value=e.readInt16BE(3)/10,a.id=(240&e[5])>>4,a.unit="\xB0C",a.value=e.readInt16BE(6)/10,2!=(15&e[5])&&(r.state=1&e[2]?"activated":"deactivated",a.state=1&e[5]?"activated":"deactivated"),t.temperatures=[r,a],t},e}();e.Temp0x43Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="temp",this.frameCode=0}return t.prototype.parseFrame=function(t,r){var a={},o=new e.GenericStatusByteParser;return a=o.parseFrame(t,r),a.probe1Alarm=!!(8&t[1]),a.probe2Alarm=!!(16&t[1]),{status:a}},t}();e.TempStatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="temp3",this.frameCode=16}return e.prototype.parseFrame=function(e){var t={type:"0x10 Temp 3 configuration",transmissionPeriodKeepAlive:{unit:"s",value:10*e.readUInt16BE(2)},numberOfHistorizationBeforeSending:e.readUInt16BE(4),numberOfSamplingBeforeHistorization:e.readUInt16BE(6),samplingPeriod:{unit:"s",value:2*e.readUInt16BE(8)},redundantSamples:e.readUInt8(10),calculatedPeriodRecording:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6))},calculatedSendingPeriod:{unit:"s",value:2*(e.readUInt16BE(8)*e.readUInt16BE(6)*e.readUInt16BE(4))}};return t},e}();e.TempV30x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="temp3",this.frameCode=48}return e.prototype.parseFrame=function(e){var t={type:"0x30 Temp 3 keep alive"},r=16&e[1]?2:1,a=[];return a.push({name:"temperature 1",unit:"\xB0C",value:e.readInt16BE(2)/10}),2==r&&a.push({name:"temperature 2",unit:"\xB0C",value:e.readInt16BE(4)/10}),t.temperatures=a,t},e}();e.TempV30x30Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="temp3",this.frameCode=87}return e.prototype.parseFrame=function(e){for(var t,r={type:"0x57 Temp 3 periodic data"},a=16&e[1]?2:1,o=[],n=[],i=[],p=2;p<e.byteLength;p+=2*a)t=e.readInt16BE(p),n.push(t/10),2==a&&(t=e.readInt16BE(p+2),i.push(t/10));return r.decodingInfo="values: [t=0, t-1, t-2, ...]",o.push({name:"temperature 1",unit:"\xB0C",values:n}),2==a&&o.push({name:"temperature 2",unit:"\xB0C",values:i}),r.temperatures=o,r},e}();e.TempV30x57Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){this.deviceType="temp3",this.frameCode=88}return e.prototype.parseFrame=function(e){var t={type:"0x58 Temp 3 alarm"},r=[],a=16&e[1]?2:1;return r.push({name:"temperature 1",alarmStatus:this.getAlarmStatusText(e.readUInt8(2)),temperature:{unit:"\xB0C",value:e.readInt16BE(3)/10}}),2==a&&r.push({name:"temperature 2",alarmStatus:this.getAlarmStatusText(e.readUInt8(5)),temperature:{unit:"\xB0C",value:e.readInt16BE(6)/10}}),t.alarms=r,t},e.prototype.getAlarmStatusText=function(e){return 1===e?"highThreshold":2===e?"lowThreshold":"none"},e}();e.TempV30x58Parser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="temp3",this.frameCode=0}return t.prototype.parseFrame=function(t,r){var a={},o=new e.GenericStatusByteParser;return a=o.parseFrame(t,r),a.configurationInconsistency=!!(8&t[1]),a.configuration2ChannelsActivated=!!(16&t[1]),{status:a}},t}();e.TempV3StatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="ticPmePmi|ticCbeLinkyMono|ticCbeLinkyTri",this.frameCode=16}return t.prototype.parseFrame=function(t){var r={type:"0x10 TIC configuration"};return 2===t[5]?(r.transmissionPeriodKeepAlive={unit:"s",value:20*t[2]},r.samplingPeriod={unit:"s",value:20*t.readUInt16BE(6)}):(r.transmissionPeriodKeepAlive={unit:"m",value:10*t[2]},r.samplingPeriod={unit:"m",value:t.readUInt16BE(6)}),r.transmissionPeriodData=t.readUInt16BE(3),r.productMode=e.PlateformCommonUtils.getProductModeText(t[5]),r},t}();e.Tic0x10Parser=t})(codec||(codec={}));var codec;(function(e){var t=String.fromCharCode,r=/** @class */function(){function e(){this.deviceType="ticPmePmi|ticCbeLinkyMono|ticCbeLinkyTri",this.frameCode=73}return e.prototype.parseFrame=function(e,t,r,a){var o={type:"0x49 TIC data"};return"ticCbeLinkyMono"===a&&(o.ADCO=this.payloadToString(e,2,14),o.OPTARIF=this.payloadToString(e,14,18),o.BASE=this.payloadToValue(e,18,"Wh"),o.ISOUSC=this.payloadToValue(e,22,"A"),o.IINST=this.payloadToValue(e,26,"A"),o.IMAX=this.payloadToValue(e,30,"A"),o.PAPP=this.payloadToValue(e,34,"VA"),o.HCHC=this.payloadToValue(e,38,"Wh"),o.HCHP=this.payloadToValue(e,42,"Wh"),o.PTEC=this.payloadToString(e,46,50)),"ticCbeLinkyTri"===a&&(o.ADCO=this.payloadToString(e,2,14),o.BASE=this.payloadToValue(e,14,"Wh"),o.IINST1=this.payloadToValue(e,18,"A"),o.IINST2=this.payloadToValue(e,22,"A"),o.IINST3=this.payloadToValue(e,26,"A"),o.IMAX1=this.payloadToValue(e,30,"A"),o.IMAX2=this.payloadToValue(e,34,"A"),o.IMAX3=this.payloadToValue(e,38,"A"),o.PMAX=this.payloadToValue(e,42,"W"),o.PAPP=this.payloadToValue(e,46,"VA")),o},e.prototype.payloadToString=function(e,r,a){for(var o=[],n=r;n<a;n++)0!==e[n]&&o.push(e[n]);var p=t(...o);return 0<p.length?p:"notFound"},e.prototype.payloadToValue=function(e,t,r){var a=e.readUInt32BE(t);return 2147483648===a?"notFound":{unit:r,value:a}},e}();e.Tic0x49Parser=r})(codec||(codec={}));var codec;(function(e){var t=String.fromCharCode,r=/** @class */function(){function e(){this.deviceType="ticPmePmi|ticCbeLinkyMono|ticCbeLinkyTri",this.frameCode=74}return e.prototype.parseFrame=function(e){var t={type:"0x4a TIC alarm",label:this.payloadToString(e,2,12),alarmType:this.getAlarmTypeText(e[12]),value:this.payloadToString(e,13,e.length)};return t},e.prototype.getAlarmTypeText=function(e){return 0===e?"manualTrigger":1===e?"labelAppearance":2===e?"labelDisappearance":3===e?"highTreshold":4===e?"lowTreshold":5===e?"endThresholdAlarm":6===e?"deltaPositive":7===e?"deltaNegative":""},e.prototype.payloadToString=function(e,r,a){for(var o=[],n=r;n<a;n++)0!==e[n]&&o.push(e[n]);var p=t(...o);return 0<p.length?p:"notFound"},e}();e.Tic0x4aParser=r})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(){this.deviceType="ticPmePmi|ticCbeLinkyMono|ticCbeLinkyTri",this.frameCode=0}return t.prototype.parseFrame=function(t,r){var a,o=new e.GenericStatusByteParser;return a=o.parseFrame(t,r),a.configurationInconsistency=!!(8&t[1]),a.readError=!!(16&t[1]),{status:a}},t}();e.TicStatusByteParser=t})(codec||(codec={}));var codec;(function(e){var t;(function(e){e[e.NONE=0]="NONE",e[e.MISSING_NETWORK=1]="MISSING_NETWORK",e[e.MISSING_CONFIGURATION=2]="MISSING_CONFIGURATION"})(t=e.PartialDecodingReason||(e.PartialDecodingReason={}))})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function t(t){void 0===t&&(t="Unknown"),this.type=t,this.partialDecoding=e.PartialDecodingReason.NONE}return t.merge=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 0===e.length?null:Object.assign(...[new t(e[0].type)].concat(e))},t.prototype.merge=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.merge(...[this].concat(e))},t}();e.ContentImpl=t})(codec||(codec={}));var codec;(function(e){var t=/** @class */function(){function e(){}/**
     * Get Product Mode text
     * @param value value
     */return e.getProductModeText=function(e){return 0===e?"PARK":1===e?"PRODUCTION":2===e?"TEST":3===e?"DEAD":""},e}();e.PlateformCommonUtils=t})(codec||(codec={}));var codec;(function(e){var t;(function(e){e.analog="Analog",e.comfort="Comfort",e.dc="Dry Contacts",e.deltap="Delta P",e.motion="Motion",e.pulse="Pulse",e.pulse3="Pulse 3",e.repeater="Repeater",e.temp="Temp",e.temp3="Temp 3",e.ticCbeLinkyMono="TIC CBE/LINKY MONO",e.ticCbeLinkyTri="TIC CBE/LINKY TRI"})(t=e.DecoderProducts||(e.DecoderProducts={}))})(codec||(codec={}));//# sourceMappingURL=lib.js.map
function base64tohex(e){return e.map(e=>`00${(255&e).toString(16)}`.slice(-2)).join("")}function ToTagoFormat(e,t,r=""){const a=[];for(const o in e)if("object"==typeof e[o])for(const r in e[o])a.push({variable:(e[o].MessageType||`${o}_${r}`).toLowerCase(),value:e[o][r],serie:e[o].serie||t});else a.push({variable:`${r}${o}`.toLowerCase(),value:e[o],serie:t});return a}function Decoder(e){var t=new codec.Decoder;const r=device.params.find(e=>"adeunis_type"===e.key)||{value:""};return t.setDeviceType(r.value),t.decode(e)}// let payload = [{ variable: "payload", value: "4040000100000005000201"}]
const data=payload.find(e=>"payload_raw"===e.variable||"payload"===e.variable||"data"===e.variable);data&&(serie=new Date().getTime(),payload=Decoder(data.value),delete payload.decodingInfo,payload=ToTagoFormat(payload,serie));
function Buffer(e,t){return fromHexString(e)}function fromHexString(e){e=e.match(/.{1,2}/g);return e?new Uint8Array(e.map(function(e){return parseInt(e,16)})):new Uint8Array}!function(t){"use strict";var n=1e5;function e(e){switch(typeof e){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===e?"null":"object"}}function o(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function s(e){return"function"==typeof e}function c(e){if(null==e)throw TypeError();return Object(e)}function d(e){return e>>>0}var a,i,r,u,l,f,p,h,y,g,m,v,F=Math.LN2,B=Math.abs,P=Math.floor,L=Math.log,E=Math.max,b=Math.min,I=Math.pow,N=Math.round;function M(r){if(!("TYPED_ARRAY_POLYFILL_NO_ARRAY_ACCESSORS"in t)){if(r.length>n)throw RangeError("Array too large for polyfill");for(var e=0;e<r.length;e+=1)!function(t){Object.defineProperty(r,t,{get:function(){return r._getter(t)},set:function(e){r._setter(t,e)},enumerable:!0,configurable:!1})}(e)}}function U(e,t){t=32-t;return e<<t>>t}function T(e,t){t=32-t;return e<<t>>>t}function R(e){return[255&e]}function k(e){return U(e[0],8)}function Y(e){return[255&e]}function w(e){return T(e[0],8)}function G(e){return[(e=N(Number(e)))<0?0:255<e?255:255&e]}function W(e){return[255&e,e>>8&255]}function q(e){return U(e[1]<<8|e[0],16)}function H(e){return[255&e,e>>8&255]}function J(e){return T(e[1]<<8|e[0],16)}function Z(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return U(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function K(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function $(e){return T(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function x(e,t,r){var n,o,a,i,s=(1<<t-1)-1;function u(e){var t=P(e),e=e-t;return!(e<.5)&&(.5<e||t%2)?t+1:t}e!=e?(n=(1<<t)-1,a=I(2,r-1),i=0):e===1/0||e===-1/0?(n=(1<<t)-1,i=e<(a=0)?1:0):0===e?i=1/e==-1/(a=n=0)?1:0:(i=e<0,(e=B(e))>=I(2,1-s)?(n=b(P(L(e)/F),1023),(o=e/I(2,n))<1&&(--n,o*=2),2<=o&&(n+=1,o/=2),n+=s,1<=(a=u(o*(o=I(2,r)))-o)/o&&(n+=1,a=0),2*s<n&&(n=(1<<t)-1,a=0)):(n=0,a=u(e/I(2,1-s-r))));for(var c=[],l=r;l;--l)c.push(a%2?1:0),a=P(a/2);for(l=t;l;--l)c.push(n%2?1:0),n=P(n/2);c.push(i?1:0),c.reverse();for(var f=c.join(""),d=[];f.length;)d.unshift(parseInt(f.substring(0,8),2)),f=f.substring(8);return d}function O(e,t,r){for(var n,o,a,i,s,u,c=[],l=0;l<e.length;++l)for(o=e[l],n=8;n;--n)c.push(o%2?1:0),o>>=1;return c.reverse(),u=c.join(""),a=(1<<t-1)-1,i=parseInt(u.substring(0,1),2)?-1:1,s=parseInt(u.substring(1,1+t),2),u=parseInt(u.substring(1+t),2),s===(1<<t)-1?0!==u?NaN:1/0*i:0<s?i*I(2,s-a)*(1+u/I(2,r)):0!==u?i*I(2,-(a-1))*(u/I(2,r)):i<0?-0:0}function Q(e){return O(e,11,52)}function X(e){return x(e,11,52)}function ee(e){return O(e,8,23)}function te(e){return x(e,8,23)}function A(e){if((e>>=0)<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"_bytes",{value:Array(e)});for(var t=0;t<e;t+=1)this._bytes[t]=0}function _(){if(!arguments.length||"object"!=typeof arguments[0])return function(e){if((e>>=0)<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:e}),Object.defineProperty(this,"byteLength",{value:e*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new A(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(1<=arguments.length&&"object"===e(arguments[0])&&arguments[0]instanceof _)return function(e){if(this.constructor!==e.constructor)throw TypeError();var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new A(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var r=0;r<this.length;r+=1)this._setter(r,e._getter(r))}.apply(this,arguments);if(1<=arguments.length&&"object"===e(arguments[0])&&!(arguments[0]instanceof _)&&!(arguments[0]instanceof A||"ArrayBuffer"===o(arguments[0])))return function(e){var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new A(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var r=0;r<this.length;r+=1){var n=e[r];this._setter(r,Number(n))}}.apply(this,arguments);if(1<=arguments.length&&"object"===e(arguments[0])&&(arguments[0]instanceof A||"ArrayBuffer"===o(arguments[0])))return function(e,t,r){if((t=d(t))>e.byteLength)throw RangeError("byteOffset out of range");if(t%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(void 0===r){var n=e.byteLength-t;if(n%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");r=n/this.BYTES_PER_ELEMENT}else n=(r=d(r))*this.BYTES_PER_ELEMENT;if(t+n>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:n}),Object.defineProperty(this,"byteOffset",{value:t}),Object.defineProperty(this,"length",{value:r})}.apply(this,arguments);throw TypeError()}function S(e,t,r){function n(){Object.defineProperty(this,"constructor",{value:n}),_.apply(this,arguments),M(this)}function o(){}"__proto__"in n?n.__proto__=_:(n.from=_.from,n.of=_.of),n.BYTES_PER_ELEMENT=e;return o.prototype=i,n.prototype=new o,Object.defineProperty(n.prototype,"BYTES_PER_ELEMENT",{value:e}),Object.defineProperty(n.prototype,"_pack",{value:t}),Object.defineProperty(n.prototype,"_unpack",{value:r}),n}function C(e,t){return s(e.get)?e.get(t):e[t]}function j(e,t,r){if(!(e instanceof ArrayBuffer||"ArrayBuffer"===o(e)))throw TypeError();if((t=d(t))>e.byteLength)throw RangeError("byteOffset out of range");if(t+(r=void 0===r?e.byteLength-t:d(r))>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:r}),Object.defineProperty(this,"byteOffset",{value:t})}function D(a){return function(e,t){if((e=d(e))+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");e+=this.byteOffset;for(var r=new Uint8Array(this.buffer,e,a.BYTES_PER_ELEMENT),n=[],o=0;o<a.BYTES_PER_ELEMENT;o+=1)n.push(C(r,o));return Boolean(t)===Boolean(v)&&n.reverse(),C(new a(new Uint8Array(n).buffer),0)}}function V(i){return function(e,t,r){if((e=d(e))+i.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");for(var t=new i([t]),n=new Uint8Array(t.buffer),o=[],a=0;a<i.BYTES_PER_ELEMENT;a+=1)o.push(C(n,a));Boolean(r)===Boolean(v)&&o.reverse(),new Uint8Array(this.buffer,e,i.BYTES_PER_ELEMENT).set(o)}}a=Object.defineProperty,m=!function(){try{return Object.defineProperty({},"x",{})}catch(e){return}}(),a&&!m||(Object.defineProperty=function(e,t,r){if(a)try{return a(e,t,r)}catch(e){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(e,t,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(e,t,r.set),"value"in r&&(e[t]=r.value),e}),t.ArrayBuffer=t.ArrayBuffer||A,Object.defineProperty(_,"from",{value:function(e){return new this(e)}}),Object.defineProperty(_,"of",{value:function(){return new this(arguments)}}),_.prototype=i={},Object.defineProperty(_.prototype,"_getter",{value:function(e){if(arguments.length<1)throw SyntaxError("Not enough arguments");if(!((e=d(e))>=this.length)){for(var t=[],r=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,n+=1)t.push(this.buffer._bytes[n]);return this._unpack(t)}}}),Object.defineProperty(_.prototype,"get",{value:_.prototype._getter}),Object.defineProperty(_.prototype,"_setter",{value:function(e,t){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(!((e=d(e))>=this.length))for(var r=this._pack(t),n=0,o=this.byteOffset+e*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,o+=1)this.buffer._bytes[o]=r[n]}}),Object.defineProperty(_.prototype,"constructor",{value:_}),Object.defineProperty(_.prototype,"copyWithin",{value:function(e,t){var r,n=arguments[2],o=c(this),a=d(o.length),a=E(a,0),e=e>>0,i=e<0?E(a+e,0):b(e,a),e=t>>0,s=e<0?E(a+e,0):b(e,a),t=void 0===n?a:n>>0,e=t<0?E(a+t,0):b(t,a),u=b(e-s,a-i);for(s<i&&i<s+u?(r=-1,s=s+u-1,i=i+u-1):r=1;0<u;)o._setter(i,o._getter(s)),s+=r,i+=r,u-=1;return o}}),Object.defineProperty(_.prototype,"every",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(!s(e))throw TypeError();for(var n=arguments[1],o=0;o<r;o++)if(!e.call(n,t._getter(o),o,t))return!1;return!0}}),Object.defineProperty(_.prototype,"fill",{value:function(e){for(var t=arguments[1],r=arguments[2],n=c(this),o=d(n.length),o=E(o,0),t=t>>0,a=t<0?E(o+t,0):b(t,o),t=void 0===r?o:r>>0,i=t<0?E(o+t,0):b(t,o);a<i;)n._setter(a,e),a+=1;return n}}),Object.defineProperty(_.prototype,"filter",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(!s(e))throw TypeError();for(var n=[],o=arguments[1],a=0;a<r;a++){var i=t._getter(a);e.call(o,i,a,t)&&n.push(i)}return new this.constructor(n)}}),Object.defineProperty(_.prototype,"find",{value:function(e){var t=c(this),r=d(t.length);if(!s(e))throw TypeError();for(var n=1<arguments.length?arguments[1]:void 0,o=0;o<r;){var a=t._getter(o),i=e.call(n,a,o,t);if(Boolean(i))return a;++o}}}),Object.defineProperty(_.prototype,"findIndex",{value:function(e){var t=c(this),r=d(t.length);if(!s(e))throw TypeError();for(var n=1<arguments.length?arguments[1]:void 0,o=0;o<r;){var a=t._getter(o),a=e.call(n,a,o,t);if(Boolean(a))return o;++o}return-1}}),Object.defineProperty(_.prototype,"forEach",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(!s(e))throw TypeError();for(var n=arguments[1],o=0;o<r;o++)e.call(n,t._getter(o),o,t)}}),Object.defineProperty(_.prototype,"indexOf",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(0===r)return-1;var n=0;if(0<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*P(B(n)))),r<=n)return-1;for(var o=0<=n?n:E(r-B(n),0);o<r;o++)if(t._getter(o)===e)return o;return-1}}),Object.defineProperty(_.prototype,"join",{value:function(e){if(null==this)throw TypeError();for(var t=Object(this),r=d(t.length),n=Array(r),o=0;o<r;++o)n[o]=t._getter(o);return n.join(void 0===e?",":e)}}),Object.defineProperty(_.prototype,"lastIndexOf",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(0===r)return-1;for(var n=r,o=(1<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*P(B(n)))),0<=n?b(n,r-1):r-B(n));0<=o;o--)if(t._getter(o)===e)return o;return-1}}),Object.defineProperty(_.prototype,"map",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(!s(e))throw TypeError();for(var n=[],o=(n.length=r,arguments[1]),a=0;a<r;a++)n[a]=e.call(o,t._getter(a),a,t);return new this.constructor(n)}}),Object.defineProperty(_.prototype,"reduce",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(!s(e))throw TypeError();if(0===r&&1===arguments.length)throw TypeError();for(var n=0,o=2<=arguments.length?arguments[1]:t._getter(n++);n<r;)o=e.call(void 0,o,t._getter(n),n,t),n++;return o}}),Object.defineProperty(_.prototype,"reduceRight",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(!s(e))throw TypeError();if(0===r&&1===arguments.length)throw TypeError();for(var n=r-1,o=2<=arguments.length?arguments[1]:t._getter(n--);0<=n;)o=e.call(void 0,o,t._getter(n),n,t),n--;return o}}),Object.defineProperty(_.prototype,"reverse",{value:function(){if(null==this)throw TypeError();for(var e=Object(this),t=d(e.length),r=P(t/2),n=0,o=t-1;n<r;++n,--o){var a=e._getter(n);e._setter(n,e._getter(o)),e._setter(o,a)}return e}}),Object.defineProperty(_.prototype,"set",{value:function(e,t){if(arguments.length<1)throw SyntaxError("Not enough arguments");var r,n,o,a,i,s,u,c,l,f;if("object"==typeof e&&e.constructor===this.constructor){if((o=d(t))+(r=e).length>this.length)throw RangeError("Offset plus length of array is out of range");if(c=this.byteOffset+o*this.BYTES_PER_ELEMENT,l=r.length*this.BYTES_PER_ELEMENT,r.buffer===this.buffer){for(f=[],i=0,s=r.byteOffset;i<l;i+=1,s+=1)f[i]=r.buffer._bytes[s];for(i=0,u=c;i<l;i+=1,u+=1)this.buffer._bytes[u]=f[i]}else for(i=0,s=r.byteOffset,u=c;i<l;i+=1,s+=1,u+=1)this.buffer._bytes[u]=r.buffer._bytes[s]}else{if("object"!=typeof e||void 0===e.length)throw TypeError("Unexpected argument type(s)");if(a=d((n=e).length),(o=d(t))+a>this.length)throw RangeError("Offset plus length of array is out of range");for(i=0;i<a;i+=1)s=n[i],this._setter(o+i,Number(s))}}}),Object.defineProperty(_.prototype,"slice",{value:function(e,t){for(var r=c(this),n=d(r.length),e=e>>0,o=e<0?E(n+e,0):b(e,n),e=void 0===t?n:t>>0,a=e<0?E(n+e,0):b(e,n),i=new r.constructor(a-o),s=0;o<a;){var u=r._getter(o);i._setter(s,u),++o,++s}return i}}),Object.defineProperty(_.prototype,"some",{value:function(e){if(null==this)throw TypeError();var t=Object(this),r=d(t.length);if(!s(e))throw TypeError();for(var n=arguments[1],o=0;o<r;o++)if(e.call(n,t._getter(o),o,t))return!0;return!1}}),Object.defineProperty(_.prototype,"sort",{value:function(r){if(null==this)throw TypeError();for(var e=Object(this),t=d(e.length),n=Array(t),o=0;o<t;++o)n[o]=e._getter(o);for(n.sort(function(e,t){return e!=e&&t!=t?0:e!=e?1:t!=t?-1:void 0!==r?r(e,t):e<t?-1:t<e?1:0}),o=0;o<t;++o)e._setter(o,n[o]);return e}}),Object.defineProperty(_.prototype,"subarray",{value:function(e,t){function r(e,t,r){return e<t?t:r<e?r:e}e>>=0,t>>=0,arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=r(e,0,this.length);t=(t=r(t,0,this.length))-e;return new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,t=t<0?0:t)}}),m=S(1,R,k),r=S(1,Y,w),u=S(1,G,w),l=S(2,W,q),f=S(2,H,J),p=S(4,Z,z),h=S(4,K,$),y=S(4,te,ee),g=S(8,X,Q),t.Int8Array=t.Int8Array||m,t.Uint8Array=t.Uint8Array||r,t.Uint8ClampedArray=t.Uint8ClampedArray||u,t.Int16Array=t.Int16Array||l,t.Uint16Array=t.Uint16Array||f,t.Int32Array=t.Int32Array||p,t.Uint32Array=t.Uint32Array||h,t.Float32Array=t.Float32Array||y,t.Float64Array=t.Float64Array||g,m=new Uint16Array([4660]),v=18===C(new Uint8Array(m.buffer),0),Object.defineProperty(j.prototype,"getUint8",{value:D(Uint8Array)}),Object.defineProperty(j.prototype,"getInt8",{value:D(Int8Array)}),Object.defineProperty(j.prototype,"getUint16",{value:D(Uint16Array)}),Object.defineProperty(j.prototype,"getInt16",{value:D(Int16Array)}),Object.defineProperty(j.prototype,"getUint32",{value:D(Uint32Array)}),Object.defineProperty(j.prototype,"getInt32",{value:D(Int32Array)}),Object.defineProperty(j.prototype,"getFloat32",{value:D(Float32Array)}),Object.defineProperty(j.prototype,"getFloat64",{value:D(Float64Array)}),Object.defineProperty(j.prototype,"setUint8",{value:V(Uint8Array)}),Object.defineProperty(j.prototype,"setInt8",{value:V(Int8Array)}),Object.defineProperty(j.prototype,"setUint16",{value:V(Uint16Array)}),Object.defineProperty(j.prototype,"setInt16",{value:V(Int16Array)}),Object.defineProperty(j.prototype,"setUint32",{value:V(Uint32Array)}),Object.defineProperty(j.prototype,"setInt32",{value:V(Int32Array)}),Object.defineProperty(j.prototype,"setFloat32",{value:V(Float32Array)}),Object.defineProperty(j.prototype,"setFloat64",{value:V(Float64Array)}),t.DataView=t.DataView||j}(this),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])}return r},writable:!0,configurable:!0}),Buffer.from=function(e,t){return fromHexString(e)},Buffer.alloc=function(e){return new Uint8Array(e)},Uint8Array.prototype.readUInt16BE=function(e){return new DataView(this.buffer).getUint16(e)},Uint8Array.prototype.readInt16BE=function(e){return new DataView(this.buffer).getInt16(e)},Uint8Array.prototype.readUInt8=function(e){return new DataView(this.buffer).getUint8(e)},Uint8Array.prototype.readUInt32BE=function(e){return new DataView(this.buffer).getUint32(e)},Uint8Array.prototype.writeUInt16BE=function(e,t){return new DataView(this.buffer).setUint16(t,e)},Uint8Array.prototype.writeUInt8=function(e,t){return new DataView(this.buffer).setUint8(t,e)},Uint8Array.prototype.writeUInt32BE=function(e,t){return new DataView(this.buffer).setUint32(t,e)};var codec,__spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},__assign=(!function(t){function e(e){this.parsers=[new t.PulseStatusByteParser,new t.Pulse0x10Parser,new t.Pulse0x11Parser,new t.Pulse0x12Parser,new t.Pulse0x30Parser,new t.Pulse0x46Parser,new t.Pulse0x47Parser,new t.Pulse0x48Parser,new t.PulseV30x10Parser,new t.PulseV30x11Parser,new t.PulseV30x12Parser,new t.PulseV30x30Parser,new t.PulseV30x46Parser,new t.PulseV30x47Parser,new t.PulseV30x5aParser,new t.PulseV30x5bParser,new t.PulseV4StatusByteParser,new t.PulseV40x10Parser,new t.PulseV40x11Parser,new t.PulseV40x12Parser,new t.PulseV40x30Parser,new t.PulseV40x46Parser,new t.PulseV40x47Parser,new t.PulseV40x5aParser,new t.PulseV40x5bParser],e&&e.codecStorage?this.codecStorage=e.codecStorage:"undefined"!=typeof localStorage?this.codecStorage=localStorage:this.codecStorage=new t.InternalCodecStorage}e.prototype.getSupported=function(){var r=[];return this.parsers.map(function(t){return t.deviceType.split("|").map(function(e){return r.push({deviceType:e,frameCode:t.frameCode})})}),r},e.prototype.findDeviceTypes=function(e){if(!/^(?:[0-9a-f]{2}){2,}$/gi.test(e))return[];var t=Buffer.from(e,"hex")[0],e=this.parsers.filter(function(e){return e.frameCode===t}).map(function(e){return e.deviceType});return Array.from(new Set(e))},e.prototype.decode=function(e,t,r){if(void 0===t&&(t="tmpDevId"),void 0===r&&(r="unknown"),!/^(?:[0-9a-f]{2}){2,}$/gi.test(e))return{type:"Invalid"};var n,o=Buffer.from(e,"hex"),e=o[0],a=this.fetchDeviceType(t),t=(16===(e="pulse4nbiot"===a?o[13]:e)?(n=o,this.storeConfiguration(n,t)):n=this.fetchConfiguration(t),this.getActiveParsers(a,e)),e=t.map(function(e){var t;try{t=e.parseFrame(o,n,r,a)}catch(e){t={error:e.toString()}}return t}),t=(t.every(function(e){return e.frameCode<0})&&e.push({type:"Unsupported"}),Object.assign.apply(Object,__spreadArray([{}],e,!1))),e=t.type;return delete t.type,t=Object.assign({type:e},t)},e.prototype.setDeviceType=function(e,t){this.codecStorage.setItem((t=void 0===t?"tmpDevId":t)+".deviceType",e)},e.prototype.clearStoredData=function(t){var r=this;t=t||"tmpDevId",["deviceType","configuration"].map(function(e){return t+"."+e}).forEach(function(e){return r.codecStorage.removeItem(e)})},e.prototype.fetchConfiguration=function(e){if(!e)return Buffer.from("");e=this.codecStorage.getItem(e+".configuration");return Buffer.from(e||"","hex")},e.prototype.storeConfiguration=function(e,t){return t&&this.codecStorage.setItem(t+".configuration",e.toString("hex")),e},e.prototype.fetchDeviceType=function(e){return e&&this.codecStorage.getItem(e+".deviceType")||""},e.prototype.storeDeviceType=function(t,e){var r="";if(!e)return r;var n=this.parsers.filter(function(e){return"any"!==e.deviceType&&e.frameCode===t});return 1===n.length&&(r=n[0].deviceType,this.codecStorage.setItem(e+".deviceType",r)),r},e.prototype.isCompatibleDeviceType=function(e,t){return 0<e.deviceType.split("|").filter(function(e){return e===t}).length},e.prototype.getActiveParsers=function(t,r){var e,n=this,o=[],a=this.parsers.filter(function(e){return n.isCompatibleDeviceType(e,t)&&(e.frameCode<0||e.frameCode===r)});return 0===a.length&&"repeater"!==t&&(e=this.parsers.filter(function(e){return"any"===e.deviceType&&(e.frameCode<0||e.frameCode===r)}),a=o.concat(e)),0<a.length&&(e=this.parsers.filter(function(e){return n.isCompatibleDeviceType(e,t)&&0===e.frameCode}),o=o.concat(e),0===e.length&&(e=this.parsers.filter(function(e){return"any"===e.deviceType&&0===e.frameCode}),o=o.concat(e))),o=o.concat(a)},t.Decoder=e}(codec=codec||{}),!function(e){function t(){this.builders=[new e.Repeater0x01Builder,new e.Repeater0x02Builder,new e.Repeater0x03Builder,new e.Repeater0x04Builder,new e.Repeater0x05Builder]}t.prototype.getSupported=function(){return this.builders.map(function(e){return{deviceType:e.deviceType,frameCode:e.frameCode}})},t.prototype.getInputDataTypes=function(t,r){var e=this.builders.find(function(e){return e.deviceType===t&&e.frameCode===r});if(!e)return{};var n,o={},a=new e.inputDataClass;for(n in a)a.hasOwnProperty(n)&&(o[n]=typeof a[n]);return o},t.prototype.encode=function(t,r,e,n){void 0===e&&(e="unknown");var o=this.builders.find(function(e){return e.deviceType===t&&e.frameCode===r});return o?o.buildFrame(n||new o.inputDataClass,e).toString("hex"):""},e.Encoder=t}(codec=codec||{}),"undefined"!=typeof module&&(module.exports=codec),"undefined"!=typeof process&&"test"===process.env.NODE_ENV&&(global.codec=codec),!function(e){function t(){this.store={}}t.prototype.getItem=function(e){return this.store[e]},t.prototype.removeItem=function(e){delete this.store[e]},t.prototype.setItem=function(e,t){this.store[e]=t},e.InternalCodecStorage=t}(codec=codec||{}),!function(e){function t(){this.deviceType="breath",this.frameCode=16}t.prototype.parseFrame=function(e,t,r){var n={type:"0x10 Breath configuration"};return n.dailyFrameActivated=Boolean(0!==e.readUInt8(2)),n.numberOfHistorizationBeforeSending=e.readUInt16BE(3),n.historyPeriod={unit:"s",value:e.readUInt16BE(5)},n.alarmRepeatActivated=Boolean(0!==e.readUInt8(7)),n.alarmRepeatPeriod={unit:"s",value:e.readUInt16BE(8)},n.redundantSamples=e.readUInt8(10),n},e.Breath0x10Parser=t}(codec=codec||{}),!function(e){function t(){this.deviceType="breath",this.frameCode=48}t.prototype.parseFrame=function(e,t,r){var n={type:"0x30 Daily frame"};return 11<=e.byteLength?(n.tvoc={min:{unit:"µg/m3",value:e.readUInt16BE(2)},max:{unit:"µg/m3",value:e.readUInt16BE(4)},average:{unit:"µg/m3",value:e.readUInt16BE(6)},duration:{unit:"min",value:e.readUInt16BE(8)}},n.pm10={min:{unit:"µg/m3",value:e.readUInt16BE(10)},max:{unit:"µg/m3",value:e.readUInt16BE(12)},average:{unit:"µg/m3",value:e.readUInt16BE(14)},duration:{unit:"min",value:e.readUInt16BE(16)}},n.pm25={min:{unit:"µg/m3",value:e.readUInt16BE(18)},max:{unit:"µg/m3",value:e.readUInt16BE(20)},average:{unit:"µg/m3",value:e.readUInt16BE(22)},duration:{unit:"min",value:e.readUInt16BE(24)}},n.pm1={min:{unit:"µg/m3",value:e.readUInt16BE(26)},max:{unit:"µg/m3",value:e.readUInt16BE(28)},average:{unit:"µg/m3",value:e.readUInt16BE(30)}}):(n.tvoc={max:{unit:"µg/m3",value:e.readUInt16BE(2)}},n.pm10={max:{unit:"µg/m3",value:e.readUInt16BE(4)}},n.pm25={max:{unit:"µg/m3",value:e.readUInt16BE(6)}},n.pm1={max:{unit:"µg/m3",value:e.readUInt16BE(8)}}),n},e.Breath0x30Parser=t}(codec=codec||{}),!function(e){function t(){this.deviceType="breath",this.frameCode=109}t.prototype.parseFrame=function(e,t,r){for(var n,o={type:"0x6d Breath periodic data"},a=[],i=[],s=[],u=[],c=e.byteLength,l=2;l<c;l+=8)n=e.readUInt16BE(l),u.push(n),n=e.readUInt16BE(l+2),a.push(n),n=e.readUInt16BE(l+4),i.push(n),n=e.readUInt16BE(l+6),s.push(n);return o.decodingInfo="values: [t=0, t-1, t-2, ...]",o.tvoc={unit:"µg/m3",values:u},o.pm10={unit:"µg/m3",values:a},o.pm25={unit:"µg/m3",values:i},o.pm1={unit:"µg/m3",values:s},o},e.Breath0x6dParser=t}(codec=codec||{}),!function(e){function t(){this.deviceType="breath",this.frameCode=110}t.prototype.parseFrame=function(e,t,r){var n={type:"0x6e Breath alarm"};return n.tvoc={alarmStatus:Boolean(1&e[2])?"active":"inactive",unit:"µg/m3",value:e.readUInt16BE(3)},n.pm10={alarmStatus:Boolean(2&e[2])?"active":"inactive",unit:"µg/m3",value:e.readUInt16BE(5)},n.pm25={alarmStatus:Boolean(4&e[2])?"active":"inactive",unit:"µg/m3",value:e.readUInt16BE(7)},n.pm1={alarmStatus:Boolean(8&e[2])?"active":"inactive",unit:"µg/m3",value:e.readUInt16BE(9)},n},e.Breath0x6eParser=t}(codec=codec||{}),!function(o){function e(){this.deviceType="breath",this.frameCode=0}e.prototype.parseFrame=function(e,t,r){var n={};return(n=(new o.GenericStatusByteParser).parseFrame(e,t)).configurationInconsistency=Boolean(8&e[1]),n.sensorError=Boolean(22&e[1]),{status:n}},o.BreathStatusByteParser=e}(codec=codec||{}),!function(e){function t(){this.deviceType="motion|comfort|comfort2|comfortCo2|deltap|breath",this.frameCode=31}t.prototype.parseFrame=function(e,t,r){var n={type:"0x1f digital input configuration"},o={},a={};return o.type=this.getTypeText(15&e[2]),o.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&e[2])>>4)},o.threshold=e.readUInt16BE(3),a.type=this.getTypeText(15&e[5]),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&e[5])>>4)},a.threshold=e.readUInt16BE(6),n.digitalInput1=o,n.digitalInput2=a,n},t.prototype.getDebouncingPeriodText=function(e){switch(e){case 0:return 0;case 1:return 10;case 2:return 20;case 3:return 500;case 4:return 100;case 5:return 200;case 6:return 500;case 7:return 1e3;case 8:return 2e3;case 9:return 5e3;case 10:return 1e4;case 11:return 2e4;case 12:return 4e4;case 13:return 6e4;case 14:return 3e5;case 15:return 6e5;default:return 0}},t.prototype.getTypeText=function(e){switch(e){case 0:return"deactivated";case 1:return"highEdge";case 2:return"lowEdge";case 3:return"bothEdges";default:return""}},e.Generic0x1fParser=t}(codec=codec||{}),!function(a){function e(){this.deviceType="any",this.frameCode=32}e.prototype.parseFrame=function(e,t,r,n){var o={type:"0x20 Configuration"};switch(e.byteLength){case 4:o.loraAdr=Boolean(1&e[2]),o.loraProvisioningMode=0===e[3]?"ABP":"OTAA","analog"!==n&&"drycontacts"!==n&&"pulse"!==n&&"temp"!==n&&(o.loraDutycyle=4&e[2]?"activated":"deactivated",o.loraClassMode=32&e[2]?"CLASS C":"CLASS A");break;case 3:case 5:o.sigfoxRetry=3&e[2],5===e.byteLength&&(o.sigfoxDownlinkPeriod={unit:"m",value:e.readInt16BE(3)});break;default:o.partialDecoding=a.PartialDecodingReason.MISSING_NETWORK}return o},a.Generic0x20Parser=e}(codec=codec||{}),!function(e){function t(){this.deviceType="drycontacts|drycontacts2|temp4",this.frameCode=47}t.prototype.parseFrame=function(e,t){var r={type:"0x2f Downlink ack"};return r.downlinkFramecode="0x"+e[2].toString(16),r.requestStatus=this.getRequestStatusText(e[3]),r},t.prototype.getRequestStatusText=function(e){switch(e){case 1:return"success";case 2:return"errorGeneric";case 3:return"errorWrongState";case 4:return"errorInvalidRequest";default:return"errorOtherReason"}},e.Generic0x2fParser=t}(codec=codec||{}),!function(e){function t(){this.deviceType="any",this.frameCode=48}t.prototype.parseFrame=function(e,t,r){return{type:"0x30 Keep alive"}},e.Generic0x30Parser=t}(codec=codec||{}),!function(e){function t(){this.deviceType="drycontacts|drycontacts2|pulse3|pulse4|temp3|temp4|comfort|comfort2|comfortCo2|motion|deltap|breath",this.frameCode=51}t.prototype.parseFrame=function(e,t,r){var n={type:"0x33 Set register status"};return n.requestStatus=this.getRequestStatusText(e[2]),n.registerId=e.readUInt16BE(3),n},t.prototype.getRequestStatusText=function(e){switch(e){case 1:return"success";case 2:return"successNoUpdate";case 3:return"errorCoherency";case 4:return"errorInvalidRegister";case 5:return"errorInvalidValue";case 6:return"errorTruncatedValue";case 7:return"errorAccesNotAllowed";default:return"errorOtherReason"}},e.Generic0x33Parser=t}(codec=codec||{}),!function(e){function t(){this.deviceType="temp4|comfort2|comfortCo2|breath",this.frameCode=55}t.prototype.parseFrame=function(e,t,r){var n={type:"0x37 Software version"};return n.appVersion=e.readUInt8(2)+"."+e.readUInt8(3)+"."+e.readUInt8(4),n.rtuVersion=e.readUInt8(5)+"."+e.readUInt8(6)+"."+e.readUInt8(7),n},e.Generic0x37Parser=t}(codec=codec||{}),!function(e){function t(){this.deviceType="motion|comfort|comfort2|comfortCo2|deltap|breath",this.frameCode=81}t.prototype.parseFrame=function(e,t,r){var n,o={type:"0x51 digital input 1 alarm"};return 4&e[1]&&(n=new Date(1e3*(e.readUInt32BE(9)+1356998400)),o.timestamp=n.toJSON().replace("Z","")),o.state={previousFrame:Boolean(e.readUInt8(2)>>1&1),current:Boolean(e.readUInt8(2)>>0&1)},o.counter={global:e.readUInt32BE(3),instantaneous:e.readUInt16BE(7)},o},e.Generic0x51Parser=t}(codec=codec||{}),this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)});function base64tohex(e){return e.map(function(e){return("00"+(255&e).toString(16)).slice(-2)}).join("")}function Decoder(e){const t=new codec.Decoder;let r;return(r=device.params?device?.params.find(e=>"parse_type"===e.key):r)&&r.value||console.error("Type unsupported. Set the configuration parameter parse_type"),t.setDeviceType(r?.value||"pulse"),t.decode(e)}!function(e){function t(){this.deviceType="motion|comfort|comfort2|comfortCo2|deltap|breath",this.frameCode=82,this.parser=new e.Generic0x51Parser}t.prototype.parseFrame=function(e,t,r){return __assign(__assign({},this.parser.parseFrame(e,t,r)),{type:"0x52 digital input 2 alarm"})},e.Generic0x52Parser=t}(codec=codec||{}),function(n){function e(){this.deviceType="any",this.frameCode=0}e.prototype.parseFrame=function(e,t){var r={};return(r=(new n.GenericStatusByteParser).parseFrame(e,t)).configurationInconsistency=Boolean(8&e[1]),{status:r}},n.GenericStatusByteExtParser=e}(codec=codec||{}),function(e){function t(){this.deviceType="any",this.frameCode=0}t.prototype.parseFrame=function(e,t){var r={};return r.frameCounter=(224&e[1])>>5,r.hardwareError=!1,r.lowBattery=Boolean(2&e[1]),r.configurationDone=Boolean(1&e[1]),r},e.GenericStatusByteParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="motion",this.frameCode=16}t.prototype.parseFrame=function(e,t,r){var n={type:"0x10 Motion configuration"};return n.transmissionPeriodKeepAlive={unit:"s",value:10*e.readUInt16BE(2)},n.numberOfHistorizationBeforeSending=e.readUInt16BE(4),n.numberOfSamplingBeforeHistorization=e.readUInt16BE(6),n.samplingPeriod={unit:"s",value:2*e.readUInt16BE(8)},n.presenceDetectorInhibition={unit:"s",value:10*e.readUInt16BE(10)},n.calculatedPeriodRecording={unit:"s",value:e.readUInt16BE(8)*e.readUInt16BE(6)*2},n.calculatedSendingPeriod={unit:"s",value:e.readUInt16BE(8)*e.readUInt16BE(6)*e.readUInt16BE(4)*2},n},e.Motion0x10Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="motion",this.frameCode=78}t.prototype.parseFrame=function(e,t,r){var n={type:"0x4e Motion data"},o=[],a=[];n.globalCounterValue=e.readUInt16BE(2);for(var i=4;i<e.byteLength;i+=3)o.push(e.readInt16BE(i)),a.push(e.readUInt8(i+2));return n.decodingInfo="counterValues/values: [t=0, t-1, t-2, ...]",n.counterValues=o,n.luminosity={unit:"%",values:a},n},e.Motion0x4eParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="motion",this.frameCode=79}t.prototype.parseFrame=function(e,t,r){var n={type:"0x4f Motion presence alarm"};return n.alarmPresence={globalCounterValue:e.readUInt16BE(2),counterValue:e.readUInt16BE(4)},n},e.Motion0x4fParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="motion",this.frameCode=80}t.prototype.parseFrame=function(e,t,r){var n={type:"0x50 Motion luminosity alarm"};return n.alarmLuminosity={alarmStatus:e[2]?"active":"inactive",luminosity:{unit:"%",value:e[3]}},n},e.Motion0x50Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="motion",this.frameCode=92}t.prototype.parseFrame=function(e,t,r){var n={type:"0x5c Motion data"},o=[],a=[];n.presenceDetectedWhenSending=Boolean(e[2]);for(var i=3;i<e.byteLength;i+=2)o.push(e[i]),a.push(e[i+1]);return n.decodingInfo="values: [t=0, t-1, t-2, ...]",n.presence={unit:"%",values:o},n.luminosity={unit:"%",values:a},n},e.Motion0x5cParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="motion",this.frameCode=93}t.prototype.parseFrame=function(e,t,r){var n={type:"0x5d Motion presence alarm"};return n.alarmPresence={alarmStatus:e[2]?"active":"inactive",luminosity:{unit:"%",value:e[3]}},n},e.Motion0x5dParser=t}(codec=codec||{}),function(u){function e(){this.deviceType="pulse",this.frameCode=16,this.pulse0x11Parser=new u.Pulse0x11Parser,this.pulse0x12Parser=new u.Pulse0x12Parser}e.prototype.parseFrame=function(e,t,r){var n={type:"0x10 Pulse configuration"},o={name:"channel A"},a={name:"channel B"},i=(n.productMode=u.PlateformCommonUtils.getProductModeText(e[2]),this.inferNetwork(e.byteLength)),s=0;return 2===e[8]?"sigfox"===i?(n.transmissionPeriod={unit:"s",value:20*e[3]},s=-1):n.transmissionPeriod={unit:"s",value:20*e.readUInt16BE(3)}:"sigfox"===i?(n.transmissionPeriod={unit:"m",value:10*e[3]},s=-1):n.transmissionPeriod={unit:"m",value:e.readUInt16BE(3)},2===e[2]?n.flowCalculationPeriod={unit:"s",value:20*e.readUInt16BE(s+8)}:n.flowCalculationPeriod={unit:"m",value:e.readUInt16BE(s+8)},n.historicMode=this.getHistoricModeText(e[s+6]),o.state=this.getStateText(Boolean(1&e[s+5])),o.type=this.getTypeText(Boolean(2&e[s+5])),o.tamperActivated=Boolean(8&e[s+5]),o.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriod(15&e[s+7])},"lora868"===i&&(o.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(10),threshold:e.readUInt16BE(14),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(18)}),a.state=this.getStateText(Boolean(16&e[s+5])),a.type=this.getTypeText(Boolean(32&e[s+5])),a.tamperActivated=Boolean(128&e[s+5]),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriod((240&e[s+7])>>4)},"lora868"===i&&(a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(12),threshold:e.readUInt16BE(16),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(20)}),n.channels=[o,a],n},e.prototype.inferNetwork=function(e){switch(e){case 22:return"lora868";case 9:return"sigfox";default:return"unknown"}},e.prototype.getStateText=function(e){return e?"enabled":"disabled"},e.prototype.getTypeText=function(e){return e?"gasPullUpOn":"otherPullUpOff"},e.prototype.getHistoricModeText=function(e){switch(e){case 0:return"noHistoric";case 1:return"historicLogEvery10min";case 2:return"historicLogEvery1h";default:return""}},e.prototype.getDebouncingPeriod=function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 10;case 3:return 20;case 4:return 50;case 5:return 100;case 6:return 200;case 7:return 500;case 8:return 1e3;case 9:return 2e3;case 10:return 5e3;case 11:return 1e4;default:return 0}},u.Pulse0x10Parser=e}(codec=codec||{}),function(e){function t(){this.deviceType="pulse",this.frameCode=17}t.prototype.parseFrame=function(e,t,r){var n={type:"0x11 Pulse configuration"},o={name:"channel A"},a={name:"channel B"};return o.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(2),threshold:e.readUInt16BE(6)},a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(4),threshold:e.readUInt16BE(8)},n.channels=[o,a],n},e.Pulse0x11Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse",this.frameCode=18}t.prototype.parseFrame=function(e,t,r){var n={type:"0x12 Pulse configuration"},o={name:"channel A"},a={name:"channel B"};return o.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(2)},a.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(4)},n.channels=[o,a],n},e.Pulse0x12Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse",this.frameCode=48}t.prototype.parseFrame=function(e,t,r){var n={type:"0x30 Pulse keep alive"},o={name:"channel A"},a={name:"channel B"};return o.flow={alarm:Boolean(1&e[2]),last24hMin:e.readUInt16BE(7),last24hMax:e.readUInt16BE(3)},o.tamperAlarm=Boolean(4&e[2]),o.leakageAlarm=Boolean(16&e[2]),a.flow={alarm:Boolean(2&e[2]),last24hMin:e.readUInt16BE(9),last24hMax:e.readUInt16BE(5)},a.tamperAlarm=Boolean(8&e[2]),a.leakageAlarm=Boolean(32&e[2]),n.channels=[o,a],n},e.Pulse0x30Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse",this.frameCode=70}t.prototype.parseFrame=function(e,t,r){var n={type:"0x46 Pulse data",decodingInfo:"counterValues: [Channel A, Channel B]"};return n.counterValues=[e.readUInt32BE(2),e.readUInt32BE(6)],n},e.Pulse0x46Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse",this.frameCode=71}t.prototype.parseFrame=function(e,t,r){var n={type:"0x47 Pulse alarm",decodingInfo:"flowValues: [Channel A, Channel B]"};return n.flowValues=[e.readUInt16BE(2),e.readUInt16BE(4)],n},e.Pulse0x47Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse",this.frameCode=72}t.prototype.parseFrame=function(e,t,r){for(var n={type:"0x48 Pulse historic data"},o=[],a=[],i={name:"channel A"},s={name:"channel B"},u=e[2],c=(0===(n.frameIndex=u)&&(i.index=e.readUInt32BE(3),s.index=e.readUInt32BE(7)),0===u?11:3),u=this.getBase(u,e.byteLength),l=c;l<e.byteLength;l+=4)o.push(e.readUInt16BE(l)),a.push(e.readUInt16BE(l+2));return 0<o.length&&(n.baseTime=u,n.decodingInfo="deltaValues: [t="+u+" to t="+(u+1)+", t="+(u+1)+" to t="+(u+2)+", ...]",i.deltaValues=o,s.deltaValues=a),n.channels=[i,s],n},t.prototype.getBase=function(e,t){return 31===t||51===t?[1,11][e]:2===e&&7===t||12===e&&7===t?23:3===e&&7===t?5:11===t?[1,1,3,5,7,9,11,13,15,17,19,21,23][e]:0},e.Pulse0x48Parser=t}(codec=codec||{}),function(r){function e(){this.deviceType="pulse",this.frameCode=0}e.prototype.parseFrame=function(e,t){return{status:(new r.GenericStatusByteParser).parseFrame(e,t)}},r.PulseStatusByteParser=e}(codec=codec||{}),function(s){function e(){this.deviceType="pulse3",this.frameCode=16}e.prototype.parseFrame=function(e,t,r){var n={type:"0x10 Pulse 3 configuration"},o={name:"channel A"},a={name:"channel B"},i=(n.productMode=s.PlateformCommonUtils.getProductModeText(e[2]),this.inferNetwork(e.byteLength));return n.numberOfHistorizationBeforeSending=e.readUInt16BE(3),n.samplingPeriod={unit:"s",value:2*e.readUInt16BE(6)},n.calculatedSendingPeriod={unit:"s",value:e.readUInt16BE(3)*e.readUInt16BE(6)*2},2===e[2]?n.flowCalculationPeriod={unit:"s",value:20*e.readUInt16BE(9)}:n.flowCalculationPeriod={unit:"m",value:e.readUInt16BE(9)},"lora868"===i&&(n.redundantSamples=e.readUInt8(27)),o.state=this.getStateText(Boolean(1&e[5])),o.type=this.getTypeText(Boolean(2&e[5])),o.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText(15&e[8])},"lora868"===i?(o.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(11),threshold:e.readUInt16BE(15),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(19)},o.tamper={activated:Boolean(8&e[5]),samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(23)},threshold:e.readUInt8(24)}):"sigfox"===i&&(o.tamper={activated:Boolean(8&e[5])}),a.state=this.getStateText(Boolean(16&e[5])),a.type=this.getTypeText(Boolean(32&e[5])),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&e[8])>>4)},"lora868"===i?(a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(13),threshold:e.readUInt16BE(17),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(21)},a.tamper={activated:Boolean(128&e[5]),samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(25)},threshold:e.readUInt8(26)}):"sigfox"===i&&(a.tamper={activated:Boolean(128&e[5])}),n.channels=[o,a],n},e.prototype.inferNetwork=function(e){switch(e){case 28:return"lora868";case 11:return"sigfox";default:return"unknown"}},e.prototype.getStateText=function(e){return e?"enabled":"disabled"},e.prototype.getTypeText=function(e){return e?"gasPullUpOn":"otherPullUpOff"},e.prototype.getDebouncingPeriodText=function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 10;case 3:return 20;case 4:return 50;case 5:return 100;case 6:return 200;case 7:return 500;case 8:return 1e3;case 9:return 2e3;case 10:return 5e3;case 11:return 1e4;default:return 0}},s.PulseV30x10Parser=e}(codec=codec||{}),function(e){function t(){this.deviceType="pulse3",this.frameCode=17}t.prototype.parseFrame=function(e,t,r){var n={type:"0x11 Pulse 3 configuration"},o={name:"channel A"},a={name:"channel B"};return o.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(2),threshold:e.readUInt16BE(6)},a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(4),threshold:e.readUInt16BE(8)},n.channels=[o,a],n},e.PulseV30x11Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse3",this.frameCode=18}t.prototype.parseFrame=function(e,t,r){var n={type:"0x12 Pulse 3 configuration"},o={name:"channel A"},a={name:"channel B"};return o.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(2)},o.tamper={samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(6)},threshold:e.readUInt8(7)},a.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(4)},a.tamper={samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(8)},threshold:e.readUInt8(9)},n.channels=[o,a],n},e.PulseV30x12Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse3",this.frameCode=48}t.prototype.parseFrame=function(e,t,r){var n={type:"0x30 Pulse 3 keep alive"},o={name:"channel A"},a={name:"channel B"};return o.flow={alarm:Boolean(1&e[2]),last24hMin:e.readUInt16BE(7),last24hMax:e.readUInt16BE(3)},o.tamperAlarm=Boolean(4&e[2]),o.leakageAlarm=Boolean(16&e[2]),a.flow={alarm:Boolean(2&e[2]),last24hMin:e.readUInt16BE(9),last24hMax:e.readUInt16BE(5)},a.tamperAlarm=Boolean(8&e[2]),a.leakageAlarm=Boolean(32&e[2]),n.channels=[o,a],n},e.PulseV30x30Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse3",this.frameCode=70}t.prototype.parseFrame=function(e,t,r){var n={type:"0x46 Pulse 3 data",decodingInfo:"counterValues: [Channel A, Channel B]"};return n.counterValues=[e.readUInt32BE(2),e.readUInt32BE(6)],n},e.PulseV30x46Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse3",this.frameCode=71}t.prototype.parseFrame=function(e,t,r){var n={type:"0x47 Pulse 3 alarm",decodingInfo:"flowValues: [Channel A, Channel B]"};return n.flowValues=[e.readUInt16BE(2),e.readUInt16BE(4)],n},e.PulseV30x47Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse3",this.frameCode=90}t.prototype.parseFrame=function(e,t,r){for(var n=e.readUInt32BE(2),o={type:"0x5a Pulse 3 data - channel A"},a=[n],i=6;i<e.byteLength;i+=2)n-=e.readUInt16BE(i),a.push(n);return o.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",o.counterValues=a,o},t.prototype.getReadingFrequency=function(e){return 0<e.byteLength?e.readUInt16BE(8)*e.readUInt16BE(6)*2:null},e.PulseV30x5aParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse3",this.frameCode=91}t.prototype.parseFrame=function(e,t,r){for(var n=e.readUInt32BE(2),o={type:"0x5b Pulse 3 data - channel B"},a=[n],i=6;i<e.byteLength;i+=2)n-=e.readUInt16BE(i),a.push(n);return o.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",o.counterValues=a,o},t.prototype.getReadingFrequency=function(e){return 0<e.byteLength?e.readUInt16BE(8)*e.readUInt16BE(6)*2:null},e.PulseV30x5bParser=t}(codec=codec||{}),function(s){function e(){this.deviceType="pulse4",this.frameCode=16}e.prototype.parseFrame=function(e,t,r){var n={type:"0x10 Pulse 4 configuration"},o={name:"channel A"},a={name:"channel B"},i=(n.productMode=s.PlateformCommonUtils.getProductModeText(e[2]),this.inferNetwork(e.byteLength));return n.numberOfHistorizationBeforeSending=e.readUInt16BE(3),n.samplingPeriod={unit:"s",value:2*e.readUInt16BE(6)},n.calculatedSendingPeriod={unit:"s",value:e.readUInt16BE(3)*e.readUInt16BE(6)*2},2===e[2]?n.flowCalculationPeriod={unit:"s",value:20*e.readUInt16BE(9)}:n.flowCalculationPeriod={unit:"m",value:e.readUInt16BE(9)},"lora868"===i&&(n.redundantSamples=e.readUInt8(27)),o.state=this.getStateText(Boolean(1&e[5])),o.type=this.getTypeText(Boolean(2&e[5])),o.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText(15&e[8])},"lora868"===i?(o.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(11),threshold:e.readUInt16BE(15),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(19)},o.tamper={activated:Boolean(8&e[5]),samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(23)},threshold:e.readUInt8(24)}):"sigfox"===i&&(o.tamper={activated:Boolean(8&e[5])}),a.state=this.getStateText(Boolean(16&e[5])),a.type=this.getTypeText(Boolean(32&e[5])),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&e[8])>>4)},"lora868"===i?(a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(13),threshold:e.readUInt16BE(17),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(21)},a.tamper={activated:Boolean(128&e[5]),samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(25)},threshold:e.readUInt8(26)}):"sigfox"===i&&(a.tamper={activated:Boolean(128&e[5])}),n.channels=[o,a],n},e.prototype.inferNetwork=function(e){switch(e){case 28:return"lora868";case 11:return"sigfox";default:return"unknown"}},e.prototype.getStateText=function(e){return e?"enabled":"disabled"},e.prototype.getTypeText=function(e){return e?"gasPullUpOn":"otherPullUpOff"},e.prototype.getDebouncingPeriodText=function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 10;case 3:return 20;case 4:return 50;case 5:return 100;case 6:return 200;case 7:return 500;case 8:return 1e3;case 9:return 2e3;case 10:return 5e3;case 11:return 1e4;default:return 0}},s.PulseV40x10Parser=e}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4",this.frameCode=17}t.prototype.parseFrame=function(e,t,r){var n={type:"0x11 Pulse 4 configuration"},o={name:"channel A"},a={name:"channel B"};return o.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(2),threshold:e.readUInt16BE(6)},a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(4),threshold:e.readUInt16BE(8)},n.channels=[o,a],n},e.PulseV40x11Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4",this.frameCode=18}t.prototype.parseFrame=function(e,t,r){var n={type:"0x12 Pulse 4 configuration"},o={name:"channel A"},a={name:"channel B"};return o.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(2)},o.tamper={samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(6)},threshold:e.readUInt8(7)},a.leakageDetection={dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(4)},a.tamper={samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(8)},threshold:e.readUInt8(9)},n.channels=[o,a],n},e.PulseV40x12Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4",this.frameCode=48}t.prototype.parseFrame=function(e,t,r){var n={type:"0x30 Pulse 4 keep alive"},o=(4&e[1]&&(o=new Date(1e3*(e.readUInt32BE(11)+1356998400)),n.timestamp=o.toJSON().replace("Z","")),{name:"channel A"}),a={name:"channel B"};return o.flow={alarm:Boolean(1&e[2]),last24hMin:e.readUInt16BE(7),last24hMax:e.readUInt16BE(3)},o.tamperAlarm=Boolean(4&e[2]),o.leakageAlarm=Boolean(16&e[2]),a.flow={alarm:Boolean(2&e[2]),last24hMin:e.readUInt16BE(9),last24hMax:e.readUInt16BE(5)},a.tamperAlarm=Boolean(8&e[2]),a.leakageAlarm=Boolean(32&e[2]),n.channels=[o,a],n},e.PulseV40x30Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4",this.frameCode=70}t.prototype.parseFrame=function(e,t,r){var n,o={type:"0x46 Pulse 4 data"};return 4&e[1]&&(n=new Date(1e3*(e.readUInt32BE(10)+1356998400)),o.timestamp=n.toJSON().replace("Z","")),o.decodingInfo="counterValues: [Channel A, Channel B]",o.counterValues=[e.readUInt32BE(2),e.readUInt32BE(6)],o},e.PulseV40x46Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4",this.frameCode=71}t.prototype.parseFrame=function(e,t,r){var n,o={type:"0x47 Pulse 4 alarm"};return 4&e[1]&&(n=new Date(1e3*(e.readUInt32BE(6)+1356998400)),o.timestamp=n.toJSON().replace("Z","")),o.decodingInfo="flowValues: [Channel A, Channel B]",o.flowValues=[e.readUInt16BE(2),e.readUInt16BE(4)],o},e.PulseV40x47Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4",this.frameCode=90}t.prototype.parseFrame=function(e,t,r){var n,o=e.readUInt32BE(2),a={type:"0x5a Pulse 4 data - channel A"},i=[o],s=4&e[1]?e.byteLength-4:e.byteLength;4&e[1]&&(n=new Date(1e3*(e.readUInt32BE(e.byteLength-4)+1356998400)),a.timestamp=n.toJSON().replace("Z",""));for(var u=6;u<s;u+=2)o-=e.readUInt16BE(u),i.push(o);return a.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",a.counterValues=i,a},t.prototype.getReadingFrequency=function(e){return 0<e.byteLength?e.readUInt16BE(8)*e.readUInt16BE(6)*2:null},e.PulseV40x5aParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4",this.frameCode=91}t.prototype.parseFrame=function(e,t,r){var n,o=e.readUInt32BE(2),a={type:"0x5b Pulse 4 data - channel B"},i=[o],s=4&e[1]?e.byteLength-4:e.byteLength;4&e[1]&&(n=new Date(1e3*(e.readUInt32BE(e.byteLength-4)+1356998400)),a.timestamp=n.toJSON().replace("Z",""));for(var u=6;u<s;u+=2)o-=e.readUInt16BE(u),i.push(o);return a.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",a.counterValues=i,a},t.prototype.getReadingFrequency=function(e){return 0<e.byteLength?e.readUInt16BE(8)*e.readUInt16BE(6)*2:null},e.PulseV40x5bParser=t}(codec=codec||{}),function(o){function e(){this.deviceType="pulse4",this.frameCode=0}e.prototype.parseFrame=function(e,t,r){var n={};return(n=(new o.GenericStatusByteParser).parseFrame(e,t)).timestamp=Boolean(4&e[1]),{status:n}},o.PulseV4StatusByteParser=e}(codec=codec||{}),function(i){function e(){this.deviceType="pulse4nbiot",this.frameCode=16,this.hOffset=13}e.prototype.parseFrame=function(e,t,r){var n={type:"0x10 Pulse 4 NB-IoT configuration"},o={name:"channel A"},a={name:"channel B"};return n.productMode=i.PlateformCommonUtils.getProductModeText(e[this.hOffset+2]),n.numberOfHistorizationBeforeSending=e.readUInt16BE(this.hOffset+3),n.samplingPeriod={unit:"s",value:2*e.readUInt16BE(this.hOffset+6)},n.calculatedSendingPeriod={unit:"s",value:e.readUInt16BE(this.hOffset+3)*e.readUInt16BE(this.hOffset+6)*2},2===e[this.hOffset+2]?n.flowCalculationPeriod={unit:"s",value:20*e.readUInt16BE(this.hOffset+9)}:n.flowCalculationPeriod={unit:"m",value:e.readUInt16BE(this.hOffset+9)},n.redundantSamples=e.readUInt8(this.hOffset+27),o.state=this.getStateText(Boolean(1&e[this.hOffset+5])),o.type=this.getTypeText(Boolean(2&e[this.hOffset+5])),o.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText(15&e[this.hOffset+8])},o.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(this.hOffset+11),threshold:e.readUInt16BE(this.hOffset+15),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(this.hOffset+19)},o.tamper={activated:Boolean(8&e[this.hOffset+5]),samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(this.hOffset+23)},threshold:e.readUInt8(this.hOffset+24)},a.state=this.getStateText(Boolean(16&e[this.hOffset+5])),a.type=this.getTypeText(Boolean(32&e[this.hOffset+5])),a.debouncingPeriod={unit:"ms",value:this.getDebouncingPeriodText((240&e[this.hOffset+8])>>4)},a.leakageDetection={overflowAlarmTriggerThreshold:e.readUInt16BE(this.hOffset+13),threshold:e.readUInt16BE(this.hOffset+17),dailyPeriodsBelowWhichLeakageAlarmTriggered:e.readUInt16BE(this.hOffset+21)},a.tamper={activated:Boolean(128&e[this.hOffset+5]),samplePeriodForDetection:{unit:"s",value:10*e.readUInt8(this.hOffset+25)},threshold:e.readUInt8(this.hOffset+26)},n.channels=[o,a],n},e.prototype.getStateText=function(e){return e?"enabled":"disabled"},e.prototype.getTypeText=function(e){return e?"gasPullUpOn":"otherPullUpOff"},e.prototype.getDebouncingPeriodText=function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 10;case 3:return 20;case 4:return 50;case 5:return 100;case 6:return 200;case 7:return 500;case 8:return 1e3;case 9:return 2e3;case 10:return 5e3;case 11:return 1e4;default:return 0}},i.PulseV4NbIot0x10Parser=e}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=32,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n={type:"0x20 Pulse 4 NB-IoT Configuration"};return n.remoteServerIpAddress=this.payloadToString(e,this.hOffset+2,this.hOffset+2+30),n.remoteServerPort=e.readUInt16BE(this.hOffset+33),n.localPort=e.readUInt16BE(this.hOffset+35),n.apn=this.payloadToString(e,this.hOffset+37,this.hOffset+37+30),n},t.prototype.payloadToString=function(e,t,r){for(var n=[],o=t;o<r;o++)0!==e[o]&&n.push(e[o]);return String.fromCharCode.apply(String,n)},e.PulseV4NbIot0x20Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=48,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n={type:"0x30 Pulse 4 NB-IoT keep alive"},o=(4&e[this.hOffset+1]&&(o=new Date(1e3*(e.readUInt32BE(this.hOffset+11)+1356998400)),n.timestamp=o.toJSON().replace("Z","")),{name:"channel A"}),a={name:"channel B"};return o.flow={alarm:Boolean(1&e[this.hOffset+2]),last24hMin:e.readUInt16BE(this.hOffset+7),last24hMax:e.readUInt16BE(this.hOffset+3)},o.tamperAlarm=Boolean(4&e[this.hOffset+2]),o.leakageAlarm=Boolean(16&e[this.hOffset+2]),a.flow={alarm:Boolean(2&e[this.hOffset+2]),last24hMin:e.readUInt16BE(this.hOffset+9),last24hMax:e.readUInt16BE(this.hOffset+5)},a.tamperAlarm=Boolean(8&e[this.hOffset+2]),a.leakageAlarm=Boolean(32&e[this.hOffset+2]),n.channels=[o,a],n},e.PulseV4NbIot0x30Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=51,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n={type:"0x33 Set register status"};return n.requestStatus=this.getRequestStatusText(e[this.hOffset+2]),n.registerId=e.readUInt16BE(this.hOffset+3),n},t.prototype.getRequestStatusText=function(e){switch(e){case 1:return"success";case 2:return"successNoUpdate";case 3:return"errorCoherency";case 4:return"errorInvalidRegister";case 5:return"errorInvalidValue";case 6:return"errorTruncatedValue";case 7:return"errorAccesNotAllowed";default:return"errorOtherReason"}},e.PulseV4NbIot0x33Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=70,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n,o={type:"0x46 Pulse 4 NB-IoT data"};return 4&e[this.hOffset+1]&&(n=new Date(1e3*(e.readUInt32BE(this.hOffset+10)+1356998400)),o.timestamp=n.toJSON().replace("Z","")),o.decodingInfo="counterValues: [Channel A, Channel B]",o.counterValues=[e.readUInt32BE(this.hOffset+2),e.readUInt32BE(this.hOffset+6)],o},e.PulseV4NbIot0x46Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=71,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n,o={type:"0x47 Pulse 4 NB-IoT alarm"};return 4&e[this.hOffset+1]&&(n=new Date(1e3*(e.readUInt32BE(this.hOffset+6)+1356998400)),o.timestamp=n.toJSON().replace("Z","")),o.decodingInfo="flowValues: [Channel A, Channel B]",o.flowValues=[e.readUInt16BE(this.hOffset+2),e.readUInt16BE(this.hOffset+4)],o},e.PulseV4NbIot0x47Parser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=90,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n,o=e.readUInt32BE(this.hOffset+2),a={type:"0x5a Pulse 4 NB-IoT data - channel A"},i=[o],s=4&e[this.hOffset+1]?e.byteLength-4:e.byteLength;4&e[this.hOffset+1]&&(n=new Date(1e3*(e.readUInt32BE(e.byteLength-4)+1356998400)),a.timestamp=n.toJSON().replace("Z",""));for(var u=this.hOffset+6;u<s;u+=2)o-=e.readUInt16BE(u),i.push(o);return a.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",a.counterValues=i,a},t.prototype.getReadingFrequency=function(e){return 0<e.byteLength?e.readUInt16BE(8)*e.readUInt16BE(6)*2:null},e.PulseV4NbIot0x5aParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=91,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n,o=e.readUInt32BE(this.hOffset+2),a={type:"0x5b Pulse 4 NB-IoT data - channel B"},i=[o],s=4&e[this.hOffset+1]?e.byteLength-4:e.byteLength;4&e[this.hOffset+1]&&(n=new Date(1e3*(e.readUInt32BE(e.byteLength-4)+1356998400)),a.timestamp=n.toJSON().replace("Z",""));for(var u=this.hOffset+6;u<s;u+=2)o-=e.readUInt16BE(u),i.push(o);return a.decodingInfo="counterValues: [t=0, t-1, t-2, ...]",a.counterValues=i,a},t.prototype.getReadingFrequency=function(e){return 0<e.byteLength?e.readUInt16BE(8)*e.readUInt16BE(6)*2:null},e.PulseV4NbIot0x5bParser=t}(codec=codec||{}),function(e){function t(){this.deviceType="pulse4nbiot",this.frameCode=0,this.hOffset=13}t.prototype.parseFrame=function(e,t,r){var n={},o={};return n.imei=e.slice(0,8).toString("hex"),n.signalQuality=e[8],n.globalFrameCounter=e.readUInt32BE(9),o.frameCounter=(224&e[this.hOffset+1])>>5,o.lowBattery=Boolean(2&e[this.hOffset+1]),o.configurationDone=Boolean(1&e[this.hOffset+1]),o.timestamp=Boolean(4&e[this.hOffset+1]),{nbIot:n,status:o}},e.PulseV4NbIotStatusByteParser=t}(codec=codec||{}),function(t){function r(e){this.type=e=void 0===e?"Unknown":e,this.partialDecoding=t.PartialDecodingReason.NONE}r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e&&0!==e.length?Object.assign.apply(Object,__spreadArray([new r(e[0].type)],e,!1)):null},r.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.merge.apply(r,__spreadArray([this],e,!1))},t.ContentImpl=r}(codec=codec||{}),function(e){function t(){}t.getProductModeText=function(e){switch(e){case 0:return"PARK";case 1:return"PRODUCTION";case 2:return"TEST";case 3:return"DEAD";default:return""}},e.PlateformCommonUtils=t}(codec=codec||{}),function(e){(e=e.DecoderProducts||(e.DecoderProducts={})).pulse="Pulse",e.pulse3="Pulse 3",e.pulse4="Pulse 4"}(codec=codec||{});const fixVariable=e=>e.replace(/ /g,"_").toLowerCase();function inspectFormat(e,t,r){let n=[];for(const c in e)if(c!=="lng".toLowerCase()&&"longitude"!==c.toLowerCase())if(c==="lat".toLowerCase()||"latitude"===c.toLowerCase()){var o=e.lng||e.longitude||e.Longitude;n.push({variable:"location",value:e[c]+", "+o,location:{lat:Number(e[c]),lng:Number(o)},group:t})}else if("object"==typeof e[c])if(e[c]?.deltaValues){for(var[a,i]of e[c].deltaValues.entries())n.push({variable:fixVariable(c)+"_deltavalue_"+a,value:i,location:e[c].location,group:t,unit:e[c].unit});n.push({variable:fixVariable(c)+"_index",value:e[c].index,location:e[c].location,group:t,unit:e[c].unit})}else if("counterValues"===c)for(var[s,u]of e[c].entries())n.push({variable:fixVariable(c)+"_"+s,value:u,location:e[c].location,group:t,unit:e[c].unit});else n=n.concat(inspectFormat(e[c],t,c));else n.push({variable:fixVariable(c),value:e[c],group:t});return n}const payload_raw=payload.find(e=>"payload_raw"===e.variable||"payload"===e.variable||"data"===e.variable);if(payload_raw)try{const s8=String(Date.now()),t8=Decoder(payload_raw.value);if(t8.channels){for(const v8 of t8.channels)t8[v8.name]=v8;delete t8.channels}const u8=inspectFormat(t8,s8);payload=payload.concat(u8.map(e=>({...e,group:s8})))}catch(e){console.error(e),payload=[{variable:"parse_error",value:e.message}]}